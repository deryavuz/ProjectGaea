!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=48)}([function(t,e,r){t.exports=r(61)},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return a}));var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},function(t,e){function r(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function u(t){r(o,i,a,u,s,"next",t)}function s(t){r(o,i,a,u,s,"throw",t)}u(void 0)}))}}},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s}));var n=r(10);function i(t,e){if(t.length!==e)return!1;for(var r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function a(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(n.b.debug&&!i(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}var u={};function s(t,e){u[t]||(u[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"g",(function(){return a})),r.d(e,"e",(function(){return o})),r.d(e,"h",(function(){return u})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"m",(function(){return f})),r.d(e,"l",(function(){return l})),r.d(e,"n",(function(){return h})),r.d(e,"i",(function(){return y})),r.d(e,"j",(function(){return d})),r.d(e,"k",(function(){return p})),r.d(e,"a",(function(){return v})),r.d(e,"f",(function(){return g}));var n=r(1);function i(){var t=new n.a(3);return n.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function o(t,e,r){var i=new n.a(3);return i[0]=t,i[1]=e,i[2]=r,i}function u(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function c(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],u=r[1],s=r[2];return t[0]=i*s-a*u,t[1]=a*o-n*s,t[2]=n*u-i*o,t}function f(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function l(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function h(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],u=e[0],s=e[1],c=e[2],f=i*c-a*s,l=a*u-n*c,h=n*s-i*u,y=i*h-a*l,d=a*f-n*h,p=n*l-i*f,v=2*o;return f*=v,l*=v,h*=v,y*=2,d*=2,p*=2,t[0]=u+f+y,t[1]=s+l+d,t[2]=c+h+p,t}function y(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function d(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function p(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function v(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],u=e[2],c=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(a*a+o*o+u*u),f=c&&s(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var b,g=a;b=i()},function(t,e,r){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",(function(){return i}))},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return s})),r.d(e,"g",(function(){return f})),r.d(e,"f",(function(){return l})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return y}));r(29),r(37),r(47),r(19);var n=1/Math.PI*180,i=1/180*Math.PI,a={};function o(t){return Math.round(t/a.EPSILON)*a.EPSILON}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.precision,n=void 0===r?a.precision||4:r;return t=o(t),"".concat(parseFloat(t.toPrecision(n)))}function s(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t,e,r){if(s(t)){r=r||((i=t).clone?i.clone():new Array(i.length));for(var n=0;n<r.length&&n<t.length;++n)r[n]=e(t[n],n,r);return r}var i;return e(t)}function f(t){return function(t,e){return c(t,(function(t){return t*i}),e)}(t)}function l(t){return function(t,e){return c(t,(function(t){return t*n}),e)}(t)}function h(t,e,r){return c(t,(function(t){return Math.max(e,Math.min(r,t))}))}function y(t,e,r){var n=a.EPSILON;r&&(a.EPSILON=r);try{if(t===e)return!0;if(s(t)&&s(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!y(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{a.EPSILON=n}}a.EPSILON=1e-12,a.debug=!1,a.precision=4,a.printTypes=!1,a.printDegrees=!1,a.printRowMajor=!0},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"g",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"l",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"k",(function(){return c})),r.d(e,"h",(function(){return f})),r.d(e,"m",(function(){return l})),r.d(e,"j",(function(){return h})),r.d(e,"d",(function(){return y})),r.d(e,"i",(function(){return d})),r.d(e,"n",(function(){return p})),r.d(e,"o",(function(){return v})),r.d(e,"f",(function(){return b})),r.d(e,"e",(function(){return g}));var n=r(1);function i(t){var e=new n.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,r,i){var a=new n.a(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=i,a}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function s(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function c(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function f(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function l(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function h(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function d(t,e,r,n){var i=e[0],a=e[1],o=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=u+n*(r[3]-u),t}function p(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function v(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],u=r[1],s=r[2],c=r[3],f=c*n+u*a-s*i,l=c*i+s*n-o*a,h=c*a+o*i-u*n,y=-o*n-u*i-s*a;return t[0]=f*c+y*-o+l*-s-h*-u,t[1]=l*c+y*-u+h*-o-f*-s,t[2]=h*c+y*-s+f*-u-l*-o,t[3]=e[3],t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function g(t,e){var r=t[0],i=t[1],a=t[2],o=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return Math.abs(r-u)<=n.b*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=n.b*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=n.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-f)<=n.b*Math.max(1,Math.abs(o),Math.abs(f))}var m,O;m=new n.a(4),n.a!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0,m[3]=0),O=m},function(t,e,r){"use strict";r.d(e,"o",(function(){return i})),r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"f",(function(){return u})),r.d(e,"n",(function(){return s})),r.d(e,"m",(function(){return c})),r.d(e,"i",(function(){return f})),r.d(e,"j",(function(){return l})),r.d(e,"k",(function(){return h})),r.d(e,"l",(function(){return y})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return p})),r.d(e,"h",(function(){return v})),r.d(e,"g",(function(){return b})),r.d(e,"e",(function(){return g}));var n=r(1);function i(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function a(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],y=e[11],d=e[12],p=e[13],v=e[14],b=e[15],g=r*u-n*o,m=r*s-i*o,O=r*c-a*o,w=n*s-i*u,k=n*c-a*u,T=i*c-a*s,E=f*p-l*d,A=f*v-h*d,j=f*b-y*d,x=l*v-h*p,S=l*b-y*p,_=h*b-y*v,I=g*_-m*S+O*x+w*j-k*A+T*E;return I?(I=1/I,t[0]=(u*_-s*S+c*x)*I,t[1]=(i*S-n*_-a*x)*I,t[2]=(p*T-v*k+b*w)*I,t[3]=(h*k-l*T-y*w)*I,t[4]=(s*j-o*_-c*A)*I,t[5]=(r*_-i*j+a*A)*I,t[6]=(v*O-d*T-b*m)*I,t[7]=(f*T-h*O+y*m)*I,t[8]=(o*S-u*j+c*E)*I,t[9]=(n*j-r*S-a*E)*I,t[10]=(d*k-p*O+b*g)*I,t[11]=(l*O-f*k-y*g)*I,t[12]=(u*A-o*x-s*E)*I,t[13]=(r*x-n*A+i*E)*I,t[14]=(p*m-d*w-v*g)*I,t[15]=(f*w-l*m+h*g)*I,t):null}function o(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],y=t[12],d=t[13],p=t[14],v=t[15];return(e*o-r*a)*(l*v-h*p)-(e*u-n*a)*(f*v-h*d)+(e*s-i*a)*(f*p-l*d)+(r*u-n*o)*(c*v-h*y)-(r*s-i*o)*(c*p-l*y)+(n*s-i*u)*(c*d-f*y)}function u(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],y=e[10],d=e[11],p=e[12],v=e[13],b=e[14],g=e[15],m=r[0],O=r[1],w=r[2],k=r[3];return t[0]=m*n+O*u+w*l+k*p,t[1]=m*i+O*s+w*h+k*v,t[2]=m*a+O*c+w*y+k*b,t[3]=m*o+O*f+w*d+k*g,m=r[4],O=r[5],w=r[6],k=r[7],t[4]=m*n+O*u+w*l+k*p,t[5]=m*i+O*s+w*h+k*v,t[6]=m*a+O*c+w*y+k*b,t[7]=m*o+O*f+w*d+k*g,m=r[8],O=r[9],w=r[10],k=r[11],t[8]=m*n+O*u+w*l+k*p,t[9]=m*i+O*s+w*h+k*v,t[10]=m*a+O*c+w*y+k*b,t[11]=m*o+O*f+w*d+k*g,m=r[12],O=r[13],w=r[14],k=r[15],t[12]=m*n+O*u+w*l+k*p,t[13]=m*i+O*s+w*h+k*v,t[14]=m*a+O*c+w*y+k*b,t[15]=m*o+O*f+w*d+k*g,t}function s(t,e,r){var n,i,a,o,u,s,c,f,l,h,y,d,p=r[0],v=r[1],b=r[2];return e===t?(t[12]=e[0]*p+e[4]*v+e[8]*b+e[12],t[13]=e[1]*p+e[5]*v+e[9]*b+e[13],t[14]=e[2]*p+e[6]*v+e[10]*b+e[14],t[15]=e[3]*p+e[7]*v+e[11]*b+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],y=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=y,t[11]=d,t[12]=n*p+u*v+l*b+e[12],t[13]=i*p+s*v+h*b+e[13],t[14]=a*p+c*v+y*b+e[14],t[15]=o*p+f*v+d*b+e[15]),t}function c(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e,r,i){var a,o,u,s,c,f,l,h,y,d,p,v,b,g,m,O,w,k,T,E,A,j,x,S,_=i[0],I=i[1],P=i[2],N=Math.hypot(_,I,P);return N<n.b?null:(_*=N=1/N,I*=N,P*=N,a=Math.sin(r),u=1-(o=Math.cos(r)),s=e[0],c=e[1],f=e[2],l=e[3],h=e[4],y=e[5],d=e[6],p=e[7],v=e[8],b=e[9],g=e[10],m=e[11],O=_*_*u+o,w=I*_*u+P*a,k=P*_*u-I*a,T=_*I*u-P*a,E=I*I*u+o,A=P*I*u+_*a,j=_*P*u+I*a,x=I*P*u-_*a,S=P*P*u+o,t[0]=s*O+h*w+v*k,t[1]=c*O+y*w+b*k,t[2]=f*O+d*w+g*k,t[3]=l*O+p*w+m*k,t[4]=s*T+h*E+v*A,t[5]=c*T+y*E+b*A,t[6]=f*T+d*E+g*A,t[7]=l*T+p*E+m*A,t[8]=s*j+h*x+v*S,t[9]=c*j+y*x+b*S,t[10]=f*j+d*x+g*S,t[11]=l*j+p*x+m*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function l(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+f*n,t[6]=u*i+l*n,t[7]=s*i+h*n,t[8]=c*i-a*n,t[9]=f*i-o*n,t[10]=l*i-u*n,t[11]=h*i-s*n,t}function h(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-f*n,t[2]=u*i-l*n,t[3]=s*i-h*n,t[8]=a*n+c*i,t[9]=o*n+f*i,t[10]=u*n+l*i,t[11]=s*n+h*i,t}function y(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+f*n,t[2]=u*i+l*n,t[3]=s*i+h*n,t[4]=c*i-a*n,t[5]=f*i-o*n,t[6]=l*i-u*n,t[7]=h*i-s*n,t}function d(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,u=n+n,s=i+i,c=r*o,f=n*o,l=n*u,h=i*o,y=i*u,d=i*s,p=a*o,v=a*u,b=a*s;return t[0]=1-l-d,t[1]=f+b,t[2]=h-v,t[3]=0,t[4]=f-b,t[5]=1-c-d,t[6]=y+p,t[7]=0,t[8]=h+v,t[9]=y-p,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t,e,r,n,i,a,o){var u=1/(r-e),s=1/(i-n),c=1/(a-o);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(i+n)*s,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function v(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}function b(t,e,r,n,i,a,o){var u=1/(e-r),s=1/(n-i),c=1/(a-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(i+n)*s,t[14]=(o+a)*c,t[15]=1,t}function g(t,e,r,i){var a,o,u,s,c,f,l,h,y,d,p=e[0],v=e[1],b=e[2],g=i[0],m=i[1],O=i[2],w=r[0],k=r[1],T=r[2];return Math.abs(p-w)<n.b&&Math.abs(v-k)<n.b&&Math.abs(b-T)<n.b?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(l=p-w,h=v-k,y=b-T,a=m*(y*=d=1/Math.hypot(l,h,y))-O*(h*=d),o=O*(l*=d)-g*y,u=g*h-m*l,(d=Math.hypot(a,o,u))?(a*=d=1/d,o*=d,u*=d):(a=0,o=0,u=0),s=h*u-y*o,c=y*a-l*u,f=l*o-h*a,(d=Math.hypot(s,c,f))?(s*=d=1/d,c*=d,f*=d):(s=0,c=0,f=0),t[0]=a,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=y,t[11]=0,t[12]=-(a*p+o*v+u*b),t[13]=-(s*p+c*v+f*b),t[14]=-(l*p+h*v+y*b),t[15]=1,t)}},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return s}));var i=r(8),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,u="object"!==(void 0===n?"undefined":r.n(i)()(n))||"[object process]"!==String(n)||n.browser,s="function"==typeof importScripts,c=void 0!==n&&n.version&&n.version.match(/v([0-9]*)/);c&&parseFloat(c[1])}).call(this,r(39),r(45))},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(24);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(n.a)(t,e)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(29);function i(t,e){return!e||"object"!==Object(n.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"i",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return u})),r.d(e,"e",(function(){return s})),r.d(e,"h",(function(){return c})),r.d(e,"f",(function(){return f})),r.d(e,"g",(function(){return l})),r.d(e,"c",(function(){return h}));var n=r(1);function i(){var t=new n.a(9);return n.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function a(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function o(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*o-u*c,h=-f*a+u*s,y=c*a-o*s,d=r*l+n*h+i*y;return d?(d=1/d,t[0]=l*d,t[1]=(-f*n+i*c)*d,t[2]=(u*n-i*o)*d,t[3]=h*d,t[4]=(f*r-i*s)*d,t[5]=(-u*r+i*a)*d,t[6]=y*d,t[7]=(-c*r+n*s)*d,t[8]=(o*r-n*a)*d,t):null}function u(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8];return e*(c*a-o*s)+r*(-c*i+o*u)+n*(s*i-a*u)}function s(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=r[0],y=r[1],d=r[2],p=r[3],v=r[4],b=r[5],g=r[6],m=r[7],O=r[8];return t[0]=h*n+y*o+d*c,t[1]=h*i+y*u+d*f,t[2]=h*a+y*s+d*l,t[3]=p*n+v*o+b*c,t[4]=p*i+v*u+b*f,t[5]=p*a+v*s+b*l,t[6]=g*n+m*o+O*c,t[7]=g*i+m*u+O*f,t[8]=g*a+m*s+O*l,t}function c(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=r[0],y=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=h*n+y*o+c,t[7]=h*i+y*u+f,t[8]=h*a+y*s+l,t}function f(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(r),y=Math.cos(r);return t[0]=y*n+h*o,t[1]=y*i+h*u,t[2]=y*a+h*s,t[3]=y*o-h*n,t[4]=y*u-h*i,t[5]=y*s-h*a,t[6]=c,t[7]=f,t[8]=l,t}function l(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,u=n+n,s=i+i,c=r*o,f=n*o,l=n*u,h=i*o,y=i*u,d=i*s,p=a*o,v=a*u,b=a*s;return t[0]=1-l-d,t[3]=f-b,t[6]=h+v,t[1]=f+b,t[4]=1-c-d,t[7]=y-p,t[2]=h-v,t[5]=y+p,t[8]=1-c-l,t}},function(t,e,r){"use strict";function n(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],i=e[1],a=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/a,t[1]=(r[1]*n+r[5]*i)/a,t}function i(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a||1;return t[0]=(r[0]*n+r[4]*i+r[8]*a)/o,t[1]=(r[1]*n+r[5]*i+r[9]*a)/o,t[2]=(r[2]*n+r[6]*i+r[10]*a)/o,t}function a(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}function o(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=r[0]*n+r[3]*i+r[6]*a,t[1]=r[1]*n+r[4]*i+r[7]*a,t[2]=r[2]*n+r[5]*i+r[8]*a,t[3]=e[3],t}r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return o}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return u}));var n=r(1);function i(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function a(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function o(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function u(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}var s,c;s=new n.a(2),n.a!=Float32Array&&(s[0]=0,s[1]=0),c=s},,,function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(24);var c=r(37);function f(t){var e="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Object(c.a)(t,arguments,Object(u.a)(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(s.a)(n,t)})(t)}var l=r(10),h=r(19);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var d=function(t){Object(a.a)(r,t);var e=y(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}},{key:"to",value:function(t){return t===this?this:Object(l.e)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(l.b)}},{key:"formatString",value:function(t){for(var e="",r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+Object(l.d)(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(l.c)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,r){void 0===r&&(r=e,e=t,t=this);for(var n=0;n<this.ELEMENTS;++n){var i=t[n];this[n]=i+r*(e[n]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"check",value:function(){if(l.b.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"ELEMENTS",get:function(){return Object(h.a)(!1),0}},{key:"RANK",get:function(){return Object(h.a)(!1),0}},{key:"elements",get:function(){return this}}]),r}(f(Array))},function(t,e){t.exports=function(t){throw new Error('"'+t+'" is read-only')}},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u}));var i=r(8),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,u="object"!==(void 0===n?"undefined":r.n(i)()(n))||"[object process]"!==String(n)||n.browser,s=void 0!==n&&n.version&&n.version.match(/v([0-9]*)/);s&&parseFloat(s[1])}).call(this,r(39),r(45))},function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(e,"a",(function(){return n}))},function(t,e){},,function(t,e,r){var n=r(62),i=r(63),a=r(43),o=r(64);t.exports=function(t,e){return n(t)||i(t,e)||a(t,e)||o()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(28);function i(t,e){if(t){if("string"==typeof t)return Object(n.a)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(t,e):void 0}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(25),c=r(4),f=r(19);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var h=function(t){Object(a.a)(r,t);var e=l(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:"copy",value:function(t){return Object(f.a)(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-t[r];e+=n*n}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return Object(f.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return Object(f.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}}]),r}(s.a)},function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(25),c=r(4),f=r(10);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var h=function(t){Object(a.a)(r,t);var e=l(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:"toString",value:function(){var t="[";if(f.b.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var r=0;r<this.RANK;++r)t+=" ".concat(this[r*this.RANK+e])}else{t+="column-major:";for(var n=0;n<this.ELEMENTS;++n)t+=" ".concat(this[n])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,r){return this[e*this.RANK+t]=Object(c.a)(r),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),r=t*this.RANK,n=0;n<this.RANK;++n)e[n]=this[r+n];return e}},{key:"setColumn",value:function(t,e){for(var r=t*this.RANK,n=0;n<this.RANK;++n)this[r+n]=e[n];return this}}]),r}(s.a)},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(33);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}return r}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(24);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,r){return(a=i()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return r&&Object(n.a)(a,r.prototype),a}).apply(null,arguments)}},,function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){},,,function(t,e,r){var n=r(44);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&y())}function y(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||f||u(y)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=r(65),i=r(66),a=r(43),o=r(67);t.exports=function(t){return n(t)||i(t)||a(t)||o()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(28);var i=r(33);function a(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,r){(function(e){var n=r(68),i="undefined"==typeof window?e:window;i.loaders=i.loaders||{},t.exports=Object.assign(i.loaders,n)}).call(this,r(39))},,,,,,,,,,,,,function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof l?e:l,a=Object.create(i.prototype),o=new T(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return A()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var u=O(o,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,o),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function l(){}function h(){}function y(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(E([])));v&&v!==e&&r.call(v,i)&&(d=v);var b=y.prototype=l.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(i,a){function o(){return new e((function(n,o){!function n(i,a,o,u){var s=c(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(l).then((function(t){f.value=t,o(f)}),(function(t){return n("throw",t,o,u)}))}u(s.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=b.constructor=y,y.constructor=h,h.displayName=u(y,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,o,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(m.prototype),m.prototype[a]=function(){return this},t.AsyncIterator=m,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new m(s(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(b),u(b,o,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}return r}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,r){var n=r(44);t.exports=function(t){if(Array.isArray(t))return n(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,r){"use strict";r.r(e),r.d(e,"Tiles3DLoader",(function(){return Li})),r.d(e,"CesiumIonLoader",(function(){return ba})),r.d(e,"Tile3DWriter",(function(){return Pa})),r.d(e,"Tile3DFeatureTable",(function(){return bt})),r.d(e,"Tile3DBatchTable",(function(){return Nt})),r.d(e,"TILE3D_TYPE",(function(){return O})),r.d(e,"_getIonTilesetMetadata",(function(){return oa}));var n={};r.r(n),r.d(n,"dirname",(function(){return h}));var i={};r.r(i),r.d(i,"decode",(function(){return mr})),r.d(i,"encode",(function(){return wr}));var a={};r.r(a),r.d(a,"decode",(function(){return _r})),r.d(a,"encode",(function(){return Ir}));var o={};r.r(o),r.d(o,"decode",(function(){return Lr})),r.d(o,"encode",(function(){return Rr}));var u={};r.r(u),r.d(u,"decode",(function(){return Ur})),r.d(u,"encode",(function(){return Cr}));var s=r(0),c=r.n(s),f=r(2),l=r.n(f);function h(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}var y=1,d=2,p="empty",v="scenegraph",b="pointcloud",g="TILES3D",m="geometricError",O={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"},w=(Object.keys(O),{BATCHED_MODEL:[98,51,100,109],INSTANCED_MODEL:[105,51,100,109],POINT_CLOUD:[112,110,116,115],COMPOSITE:[99,109,112,116]});function k(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function T(t,e,r){k(t instanceof ArrayBuffer);var n=new TextDecoder("utf8"),i=new Uint8Array(t,e,r);return n.decode(i)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new DataView(t);return"".concat(String.fromCharCode(r.getUint8(e+0))).concat(String.fromCharCode(r.getUint8(e+1))).concat(String.fromCharCode(r.getUint8(e+2))).concat(String.fromCharCode(r.getUint8(e+3)))}var A,j=r(3),x=r.n(j),S=r(8),_=r.n(S),I=r(32),P=r.n(I),N=r(13),L=r(30),R={};function M(t){return D.apply(this,arguments)}function D(){return(D=l()(c.a.mark((function t(e){var r,n,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,n=i.length>2&&void 0!==i[2]?i[2]:{},r&&(e=U(e,r,n)),R[e]=R[e]||C(e),t.next=6,R[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(t,e,r){var n=r.modules||{};return n[t]?n[t]:N.b?r.CDN?(k(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(e,"@").concat("2.3.9","/dist/libs/").concat(t)):N.c?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function C(t){return B.apply(this,arguments)}function B(){return(B=l()(c.a.mark((function t(e){var r,n,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(N.b){t.next=9;break}return t.abrupt("return",L.requireFromFile&&L.requireFromFile(e));case 9:if(!N.c){t.next=11;break}return t.abrupt("return",importScripts(e));case 11:return t.next=13,fetch(e);case 13:return n=t.sent,t.next=16,n.text();case 16:return i=t.sent,t.abrupt("return",F(i,e));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t,e){if(!N.b)return L.requireFromString&&L.requireFromString(t,e);if(N.c)return eval.call(N.a,t),null;var r=document.createElement("script");r.id=e;try{r.appendChild(document.createTextNode(t))}catch(e){r.text=t}return document.body.appendChild(r),null}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t){return q.apply(this,arguments)}function q(){return(q=l()(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.modules||{},A=r.draco3d?A||new Promise((function(t){var e=r.draco3d.createDecoderModule({onModuleLoaded:function(){t({draco:e})}})})):A||H(e),t.next=4,A;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t){return W.apply(this,arguments)}function W(){return(W=l()(c.a.mark((function t(e){var r,n,i,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,M("draco_decoder.js","draco",e);case 5:return r=t.sent,t.abrupt("break",21);case 7:return t.t1=Promise,t.next=10,M("draco_wasm_wrapper.js","draco",e);case 10:return t.t2=t.sent,t.next=13,M("draco_decoder.wasm","draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:i=t.sent,a=P()(i,2),r=a[0],n=a[1];case 21:return r=r||N.a.DracoDecoderModule,t.next=24,K(r,n);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t,e){var r={};return e&&(r.wasmBinary=e),new Promise((function(e){t(G(G({},r),{},{onModuleLoaded:function(t){return e({draco:t})}}))}))}var Q=r(16),Y=r.n(Q),Z=r(17),J=r.n(Z);function X(t){if(!t||!t.POSITION)return null;var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,u=t.POSITION.value,s=u&&u.length;if(!s)return null;for(var c=0;c<s;c+=3){var f=u[c],l=u[c+1],h=u[c+2];e=f<e?f:e,r=l<r?l:r,n=h<n?h:n,i=f>i?f:i,a=l>a?l:a,o=h>o?h:o}return[[e,r,n],[i,a,o]]}var $=0,tt=1,et={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},rt={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},nt=function(){function t(e){Y()(this,t),this.draco=e,this.drawMode="TRIANGLE",this.metadataQuerier={}}return J()(t,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(t){t&&this.draco.destroy(t.dracoGeometry)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.metadataQuerier=new this.draco.MetadataQuerier;var r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength);var n,i,a,o=new this.draco.Decoder,u={};try{var s=o.GetEncodedGeometryType(r);switch(s){case this.draco.TRIANGULAR_MESH:i=new this.draco.Mesh,n=o.DecodeBufferToMesh(r,i),a={type:$,faceCount:i.num_faces(),attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;case this.draco.POINT_CLOUD:i=new this.draco.PointCloud,n=o.DecodeBufferToPointCloud(r,i),a={type:tt,attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!n.ok()||!i.ptr){var c="DRACO decompression failed: ".concat(n.error_msg());throw i&&this.draco.destroy(i),new Error(c)}u.loaderData={header:a},this._extractDRACOGeometry(o,i,s,u,e);var f=this._getGeometryMetadata(o,i);u.header={vertexCount:a.vertexCount,boundingBox:X(u.attributes),metadata:f}}finally{this.draco.destroy(o),this.draco.destroy(r),this.draco.destroy(i),this.draco.destroy(this.metadataQuerier)}return u}},{key:"_extractDRACOGeometry",value:function(t,e,r,n,i){var a=this._getAttributes(t,e,i);if(!a.POSITION)throw new Error("DRACO decompressor: No position attribute found.");return r===this.draco.TRIANGULAR_MESH?(a.indices="TRIANGLE_STRIP"===this.drawMode?this._getMeshStripIndices(t,e):this._getMeshFaceIndices(t,e),n.mode="TRIANGLE_STRIP"===this.drawMode?5:4):n.mode=0,a.indices&&(n.indices={value:a.indices,size:1},delete a.indices),n.attributes=a,n}},{key:"getPositionAttributeMetadata",value:function(t){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var e=new this.draco.AttributeQuantizationTransform;if(e.InitFromAttribute(t)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=e.range(),this.metadata.attributes.position.numQuantizationBits=e.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var r=0;r<3;++r)this.metadata.attributes.position.minValues[r]=e.min_value(r)}this.draco.destroy(e)}},{key:"_getAttributes",value:function(t,e,r){for(var n={},i=e.num_points(),a=0;a<e.num_attributes();a++){var o=t.GetAttribute(e,a),u=this._getAttributeMetadata(t,e,a),s={uniqueId:o.unique_id(),attributeType:o.attribute_type(),dataType:rt[o.data_type()],size:o.size(),numComponents:o.num_components(),byteOffset:o.byte_offset(),byteStride:o.byte_stride(),normalized:o.normalized(),metadata:u},c=this._deduceAttributeName(s,r),f=this._getAttributeTypedArray(t,e,o,c).typedArray;n[c]={value:f,size:f.length/i,metadata:u}}return n}},{key:"_getMeshFaceIndices",value:function(t,e){for(var r=e.num_faces(),n=new Uint32Array(3*r),i=new this.draco.DracoInt32Array,a=0;a<r;++a){t.GetFaceFromMesh(e,a,i);var o=3*a;n[o]=i.GetValue(0),n[o+1]=i.GetValue(1),n[o+2]=i.GetValue(2)}return this.draco.destroy(i),n}},{key:"_getMeshStripIndices",value:function(t,e){var r=new this.draco.DracoInt32Array;t.GetTriangleStripsFromMesh(e,r);for(var n=new Uint32Array(r.size()),i=0;i<r.size();++i)n[i]=r.GetValue(i);return this.draco.destroy(r),n}},{key:"_getAttributeTypedArray",value:function(t,e,r,n){if(0===r.ptr){var i="DRACO decode bad attribute ".concat(n);throw new Error(i)}var a,o,u=rt[r.data_type()],s=r.num_components(),c=e.num_points()*s;switch(u){case Float32Array:a=new this.draco.DracoFloat32Array,t.GetAttributeFloatForAllPoints(e,r,a),o=new Float32Array(c);break;case Int8Array:a=new this.draco.DracoInt8Array,t.GetAttributeInt8ForAllPoints(e,r,a),o=new Int8Array(c);break;case Int16Array:a=new this.draco.DracoInt16Array,t.GetAttributeInt16ForAllPoints(e,r,a),o=new Int16Array(c);break;case Int32Array:a=new this.draco.DracoInt32Array,t.GetAttributeInt32ForAllPoints(e,r,a),o=new Int32Array(c);break;case Uint8Array:a=new this.draco.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(e,r,a),o=new Uint8Array(c);break;case Uint16Array:a=new this.draco.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(e,r,a),o=new Uint16Array(c);break;case Uint32Array:a=new this.draco.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(e,r,a),o=new Uint32Array(c);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var f=0;f<c;f++)o[f]=a.GetValue(f);return this.draco.destroy(a),{typedArray:o,components:s}}},{key:"_deduceAttributeName",value:function(t,e){var r=e.extraAttributes,n=void 0===r?{}:r;if(n&&"object"===_()(n))for(var i=0,a=Object.entries(n);i<a.length;i++){var o=P()(a[i],2),u=o[0];if(o[1]===t.uniqueId)return u}for(var s in et){var c=this.draco[s];if(t.attributeType===c)return et[s]}if(t.metadata){var f=e.attributeNameEntry||"name";if(t.metadata[f])return t.metadata[f].string}return"CUSTOM_ATTRIBUTE_".concat(t.uniqueId)}},{key:"_getGeometryMetadata",value:function(t,e){var r=t.GetMetadata(e);return this._queryDracoMetadata(r)}},{key:"_getAttributeMetadata",value:function(t,e,r){var n=t.GetAttributeMetadata(e,r);return this._queryDracoMetadata(n)}},{key:"_queryDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},r=this.metadataQuerier.NumEntries(t),n=0;n<r;n++){var i=this.metadataQuerier.GetEntryName(t,n);e[i]={int:this.metadataQuerier.GetIntEntry(t,i),string:this.metadataQuerier.GetStringEntry(t,i),double:this.metadataQuerier.GetDoubleEntry(t,i),intArray:this.metadataQuerier.GetIntEntryArray(t,i)}}return e}},{key:"decode",value:function(t,e){return this.parseSync(t,e)}}]),t}();function it(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?it(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ot=at(at({},{id:"draco",name:"Draco",version:"2.3.9",extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===("undefined"==typeof WebAssembly?"undefined":_()(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat("2.3.9","/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js",extraAttributes:{}}}}),{},{parse:function(t,e,r,n){return ut.apply(this,arguments)}});function ut(){return(ut=l()(c.a.mark((function t(e,r,n,i){var a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(r);case 2:return a=t.sent,o=a.draco,u=new nt(o),t.prev=5,t.abrupt("return",u.parseSync(e,at({extraAttributes:r.draco&&r.draco.extraAttributes||null},r.parseOptions||{})));case 7:return t.prev=7,u.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ft,lt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},ht=ct(ct({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}),lt),yt=r(71),dt=(ft={},x()(ft,lt.DOUBLE,Float64Array),x()(ft,lt.FLOAT,Float32Array),x()(ft,lt.UNSIGNED_SHORT,Uint16Array),x()(ft,lt.UNSIGNED_INT,Uint32Array),x()(ft,lt.UNSIGNED_BYTE,Uint8Array),x()(ft,lt.BYTE,Int8Array),x()(ft,lt.SHORT,Int16Array),x()(ft,lt.INT,Int32Array),ft),pt={DOUBLE:lt.DOUBLE,FLOAT:lt.FLOAT,UNSIGNED_SHORT:lt.UNSIGNED_SHORT,UNSIGNED_INT:lt.UNSIGNED_INT,UNSIGNED_BYTE:lt.UNSIGNED_BYTE,BYTE:lt.BYTE,SHORT:lt.SHORT,INT:lt.INT},vt=function(){function t(){Y()(this,t)}return J()(t,null,[{key:"fromTypedArray",value:function(t){for(var e in t=ArrayBuffer.isView(t)?t.constructor:t,dt){if(dt[e]===t)return e}throw new Error("Failed to convert GL type")}},{key:"fromName",value:function(t){var e=pt[t];if(!e)throw new Error("Failed to convert GL type");return e}},{key:"getArrayType",value:function(t){switch(t){case lt.UNSIGNED_SHORT_5_6_5:case lt.UNSIGNED_SHORT_4_4_4_4:case lt.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var e=dt[t];if(!e)throw new Error("Failed to convert GL type");return e}}},{key:"getByteSize",value:function(e){return t.getArrayType(e).BYTES_PER_ELEMENT}},{key:"validate",value:function(e){return Boolean(t.getArrayType(e))}},{key:"createTypedArray",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;void 0===i&&(i=(r.byteLength-n)/t.getByteSize(e));var a=t.getArrayType(e);return new a(r,n,i)}}]),t}(),bt=function(){function t(e,r){Y()(this,t),this.json=e,this.buffer=r,this.featuresLength=0,this._cachedTypedArrays={}}return J()(t,[{key:"getExtension",value:function(t){return this.json.extensions&&this.json.extensions[t]}},{key:"hasProperty",value:function(t){return Boolean(this.json[t])}},{key:"getGlobalProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.UNSIGNED_INT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.json[t];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(t,e,r,1,n.byteOffset):n}},{key:"getPropertyArray",value:function(t,e,r){var n=this.json[t];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(e=vt.fromName(n.componentType)),this._getTypedArrayFromBinary(t,e,r,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(t,e,n)}},{key:"getProperty",value:function(t,e,r,n,i){var a=this.json[t];if(!a)return a;var o=this.getPropertyArray(t,e,r);if(1===r)return o[n];for(var u=0;u<r;++u)i[u]=o[r*n+u];return i}},{key:"_getTypedArrayFromBinary",value:function(t,e,r,n,i){var a=this._cachedTypedArrays,o=a[t];return o||(o=vt.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+i,n*r),a[t]=o),o}},{key:"_getTypedArrayFromArray",value:function(t,e,r){var n=this._cachedTypedArrays,i=n[t];return i||(i=vt.createTypedArray(e,r),n[t]=i),i}}]),t}(),gt=r(46),mt=r.n(gt),Ot={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wt={SCALAR:function(t,e){return t[e]},VEC2:function(t,e){return[t[2*e+0],t[2*e+1]]},VEC3:function(t,e){return[t[3*e+0],t[3*e+1],t[3*e+2]]},VEC4:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT2:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT3:function(t,e){return[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]]},MAT4:function(t,e){return[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]}},kt={SCALAR:function(t,e,r){e[r]=t},VEC2:function(t,e,r){e[2*r+0]=t[0],e[2*r+1]=t[1]},VEC3:function(t,e,r){e[3*r+0]=t[0],e[3*r+1]=t[1],e[3*r+2]=t[2]},VEC4:function(t,e,r){e[4*r+0]=t[0],e[4*r+1]=t[1],e[4*r+2]=t[2],e[4*r+3]=t[3]},MAT2:function(t,e,r){e[4*r+0]=t[0],e[4*r+1]=t[1],e[4*r+2]=t[2],e[4*r+3]=t[3]},MAT3:function(t,e,r){e[9*r+0]=t[0],e[9*r+1]=t[1],e[9*r+2]=t[2],e[9*r+3]=t[3],e[9*r+4]=t[4],e[9*r+5]=t[5],e[9*r+6]=t[6],e[9*r+7]=t[7],e[9*r+8]=t[8],e[9*r+9]=t[9]},MAT4:function(t,e,r){e[16*r+0]=t[0],e[16*r+1]=t[1],e[16*r+2]=t[2],e[16*r+3]=t[3],e[16*r+4]=t[4],e[16*r+5]=t[5],e[16*r+6]=t[6],e[16*r+7]=t[7],e[16*r+8]=t[8],e[16*r+9]=t[9],e[16*r+10]=t[10],e[16*r+11]=t[11],e[16*r+12]=t[12],e[16*r+13]=t[13],e[16*r+14]=t[14],e[16*r+15]=t[15]}};var Tt=r(26),Et=r.n(Tt),At=function(t){return void 0!==t};function jt(t,e,r){if(!e)return null;var n=t.getExtension("3DTILES_batch_table_hierarchy"),i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,n=i),n?function(t,e){var r,n,i,a,o=t.instancesLength,u=t.classes,s=t.classIds,c=t.parentCounts,f=t.parentIds,l=o;At(s.byteOffset)&&(s.componentType=defaultValue(s.componentType,GL.UNSIGNED_SHORT),s.type=AttributeType.SCALAR,i=getBinaryAccessor(s),Et()("classIds"),s=i.createArrayBufferView(e.buffer,e.byteOffset+s.byteOffset,o));if(At(c))for(At(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),Et()("parentCounts"),c=i.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,o)),a=new Uint16Array(o),Et()("parentIdsLength"),l=0,r=0;r<o;++r)a[r]=l,l+=(Et()("parentIdsLength"),c[r]);At(f)&&At(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,GL.UNSIGNED_SHORT),f.type=AttributeType.SCALAR,i=getBinaryAccessor(f),Et()("parentIds"),f=i.createArrayBufferView(e.buffer,e.byteOffset+f.byteOffset,l));var h=u.length;for(r=0;r<h;++r){var y=u[r].length,d=u[r].instances,p=getBinaryProperties(y,d,e);u[r].instances=combine(p,d)}var v=new Array(h).fill(0),b=new Uint16Array(o);for(r=0;r<o;++r)n=s[r],b[r]=v[n],++v[n];var g={classes:u,classIds:s,classIndexes:b,parentCounts:c,parentIndexes:a,parentIds:f};return function(t){for(var e=t.classIds.length,r=0;r<e;++r)St(t,r,stack)}(g),g}(n,r):null}function xt(t,e,r){if(t){var n=t.parentCounts;return t.parentIds?r(t,e):n>0?function(t,e,r){var n=t.classIds,i=t.parentCounts,a=t.parentIds,o=t.parentIndexes,u=n.length,s=scratchVisited;s.length=Math.max(s.length,u);var c=++marker,f=scratchStack;f.length=0,f.push(e);for(;f.length>0;)if(e=f.pop(),s[e]!==c){s[e]=c;var l=r(t,e);if(At(l))return l;for(var h=i[e],y=o[e],d=0;d<h;++d){var p=a[y+d];p!==e&&f.push(p)}}return null}(t,e,r):function(t,e,r){var n=!0;for(;n;){var i=r(t,e);if(At(i))return i;var a=t.parentIds[e];n=a!==e,e=a}throw new Error("traverseHierarchySingleParent")}(t,e,r)}}function St(t,e,r){var n=t.parentCounts,i=t.parentIds,a=t.parentIndexes,o=t.classIds.length;if(At(i)){assert(e<o,"Parent index ".concat(e," exceeds the total number of instances: ").concat(o)),assert(-1===r.indexOf(e),"Circular dependency detected in the batch table hierarchy."),r.push(e);for(var u=At(n)?n[e]:1,s=At(n)?a[e]:e,c=0;c<u;++c){var f=i[s+c];f!==e&&St(t,f,r)}r.pop(e)}}function _t(t){return null!=t}var It=function(t,e){return t},Pt={HIERARCHY:!0,extensions:!0,extras:!0},Nt=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(var a in Y()(this,t),k(n>=0),this.json=e||{},this.binary=r,this.featureCount=n,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)Pt[a]||(this._properties[a]=this.json[a]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=jt(this,this.json,this.binary))}return J()(t,[{key:"getExtension",value:function(t){return this.json&&this.json.extensions&&this.json.extensions[t]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(t,e){return this._checkBatchId(t),k("string"==typeof e,e),!!this._hierarchy&&_t(xt(this._hierarchy,t,(function(t,r){var n=t.classIds[r];return t.classes[n].name===e})))}},{key:"isExactClass",value:function(t,e){return k("string"==typeof e,e),this.getExactClassName(t)===e}},{key:"getExactClassName",value:function(t){if(this._checkBatchId(t),this._hierarchy){var e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}}},{key:"hasProperty",value:function(t,e){return this._checkBatchId(t),k("string"==typeof e,e),_t(this._properties[e])||this._hasPropertyInHierarchy(t,e)}},{key:"getPropertyNames",value:function(t,e){var r;this._checkBatchId(t),(e=_t(e)?e:[]).length=0;var n=Object.keys(this._properties);return(r=e).push.apply(r,mt()(n)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e}},{key:"getProperty",value:function(t,e){if(this._checkBatchId(t),k("string"==typeof e,e),this._binaryProperties){var r=this._binaryProperties[e];if(_t(r))return this._getBinaryProperty(r,t)}var n=this._properties[e];if(_t(n))return It(n[t]);if(this._hierarchy){var i=this._getHierarchyProperty(t,e);if(_t(i))return i}}},{key:"setProperty",value:function(t,e,r){var n=this.featureCount;if(this._checkBatchId(t),k("string"==typeof e,e),this._binaryProperties){var i=this._binaryProperties[e];if(i)return void this._setBinaryProperty(i,t,r)}if(!this._hierarchy||!this._setHierarchyProperty(this,t,e,r)){var a=this._properties[e];_t(a)||(this._properties[e]=new Array(n),a=this._properties[e]),a[t]=It(r)}}},{key:"_checkBatchId",value:function(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(t,e){return t.unpack(t.typedArray,e)}},{key:"_setBinaryProperty",value:function(t,e,r){t.pack(r,t.typedArray,e)}},{key:"_initializeBinaryProperties",value:function(){var t=null;for(var e in this._properties){var r=this._properties[e],n=this._initializeBinaryProperty(e,r);n&&((t=t||{})[e]=n)}return t}},{key:"_initializeBinaryProperty",value:function(t,e){if("byteOffset"in e){var r=e;k(this.binary,"Property ".concat(t," requires a batch table binary.")),k(r.type,"Property ".concat(t," requires a type."));var n=function(t,e,r,n){var i=t.componentType;k(t.componentType);var a="string"==typeof i?vt.fromName(i):i,o=Ot[t.type],u=wt[t.type],s=kt[t.type];return r+=t.byteOffset,{values:vt.createTypedArray(a,e,r,o*n),type:a,size:o,unpacker:u,packer:s}}(r,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(t,e){if(!this._hierarchy)return!1;var r=xt(this._hierarchy,t,(function(t,r){var n=t.classIds[r];return _t(t.classes[n].instances[e])}));return _t(r)}},{key:"_getPropertyNamesInHierarchy",value:function(t,e){xt(this._hierarchy,t,(function(t,r){var n=t.classIds[r],i=t.classes[n].instances;for(var a in i)i.hasOwnProperty(a)&&-1===e.indexOf(a)&&e.push(a)}))}},{key:"_getHierarchyProperty",value:function(t,e){var r=this;return xt(this._hierarchy,t,(function(t,n){var i=t.classIds[n],a=t.classes[i],o=t.classIndexes[n],u=a.instances[e];return _t(u)?_t(u.typedArray)?r._getBinaryProperty(u,o):It(u[o]):null}))}},{key:"_setHierarchyProperty",value:function(t,e,r,n){var i=this,a=xt(this._hierarchy,e,(function(t,a){var o=t.classIds[a],u=t.classes[o],s=t.classIndexes[a],c=u.instances[r];return!!_t(c)&&(k(a===e,'Inherited property "'.concat(r,'" is read-only.')),_t(c.typedArray)?i._setBinaryProperty(c,s,n):c[s]=It(n),!0)}));return _t(a)}}]),t}();function Lt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new DataView(e);if(t.magic=n.getUint32(r,!0),r+=4,t.version=n.getUint32(r,!0),r+=4,t.byteLength=n.getUint32(r,!0),r+=4,1!==t.version)throw new Error("3D Tile Version ".concat(t.version," not supported"));return r}function Rt(t,e,r){var n=new DataView(e);return t.header=t.header||{},t.header.featureTableJsonByteLength=n.getUint32(r,!0),r+=4,t.header.featureTableBinaryByteLength=n.getUint32(r,!0),r+=4,t.header.batchTableJsonByteLength=n.getUint32(r,!0),r+=4,t.header.batchTableBinaryByteLength=n.getUint32(r,!0),r+=4}function Mt(t,e,r,n){return r=function(t,e,r,n){var i=t.header,a=i.featureTableJsonByteLength,o=i.featureTableBinaryByteLength;if(t.featureTableJson={BATCH_LENGTH:0},a>0){var u=T(e,r,a);t.featureTableJson=JSON.parse(u)}return r+=a,t.featureTableBinary=new Uint8Array(e,r,o),r+=o}(t,e,r),r=function(t,e,r,n){var i=t.header,a=i.batchTableJsonByteLength,o=i.batchTableBinaryByteLength;if(a>0){var u=T(e,r,a);t.batchTableJson=JSON.parse(u),r+=a,o>0&&(t.batchTableBinary=new Uint8Array(e,r,o),t.batchTableBinary=new Uint8Array(t.batchTableBinary),r+=o)}return r}(t,e,r)}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=t>>11&31,n=t>>5&63,i=31&t;return e[0]=r<<3,e[1]=n<<2,e[2]=i<<3,e}function Ut(t,e,r){if(!(e||t&&t.batchIds&&r))return null;var n=t.batchIds,i=t.isRGB565,a=t.pointCount;if(n&&r){for(var o=new Uint8ClampedArray(3*a),u=0;u<a;u++){var s=n[u],c=r.getProperty(s,"dimensions").map((function(t){return 255*t}));o[3*u]=c[0],o[3*u+1]=c[1],o[3*u+2]=c[2]}return{type:ht.UNSIGNED_BYTE,value:o,size:3,normalized:!0}}if(i){for(var f=new Uint8ClampedArray(3*a),l=0;l<a;l++){var h=Dt(e[l]);f[3*l]=h[0],f[3*l+1]=h[1],f[3*l+2]=h[2]}return{type:ht.UNSIGNED_BYTE,value:f,size:3,normalized:!0}}return e&&e.length===3*a?{type:ht.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:ht.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}var Ct=r(9),Bt=r(7),Ft=r(14),Vt=r(15),Gt=r(6),zt=r(34),qt=r(10),Ht=r(4),Wt=r(21),Kt=r(20);function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(Gt.a)(t);if(e){var i=Object(Gt.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(Vt.a)(this,r)}}var Yt=function(t){Object(Ft.a)(r,t);var e=Qt(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(Ct.a)(this,r),t=e.call(this,2),Object(qt.e)(n)&&1===arguments.length?t.copy(n):(qt.b.debug&&(Object(Ht.a)(n),Object(Ht.a)(i)),t[0]=n,t[1]=i),t}return Object(Bt.a)(r,[{key:"set",value:function(t,e){return this[0]=t,this[1]=e,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this.check()}},{key:"fromObject",value:function(t){return qt.b.debug&&(Object(Ht.a)(t.x),Object(Ht.a)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return Wt.d(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(Kt.a)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return Wt.c(this,this,t),this.check()}},{key:"transformByMatrix2x3",value:function(t){return Wt.b(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Wt.a(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),r}(zt.a),Zt=r(72);function Jt(t,e){if(!t)throw new Error("math.gl assertion failed. ".concat(e))}new Yt,new yt.a,new Yt,new Yt,new Uint8Array(1);function Xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return Object(qt.a)(t,0,e)/e*2-1}function $t(t){return t<0?-1:1}function te(t,e,r,n){if(Jt(n),t<0||t>r||e<0||e>r)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(r));if(n.x=Xt(t,r),n.y=Xt(e,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){var i=n.x;n.x=(1-Math.abs(n.y))*$t(i),n.y=(1-Math.abs(i))*$t(n.y)}return n.normalize()}function ee(t,e,r){return te(t,e,255,r)}var re=new yt.a;function ne(t,e,r){return t.isQuantized?r["3d-tiles"]&&r["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){for(var r=new yt.a,n=new Float32Array(3*t.pointCount),i=0;i<t.pointCount;i++)r.set(e[3*i],e[3*i+1],e[3*i+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(n,3*i);return n}(t,e)):{type:ht.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oe(t,e,r,n,i){return ue.apply(this,arguments)}function ue(){return(ue=l()(c.a.mark((function t(e,r,n,i,a){var o,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Lt(e,r,n),n=Rt(e,r,n),n=Mt(e,r,n),se(e),o=ce(e),u=o.featureTable,s=o.batchTable,t.next=7,ye(e,u,s,i,a);case 7:return fe(e,u,i),le(e,u,s),he(e,u),t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function ce(t){var e=new bt(t.featureTableJson,t.featureTableBinary),r=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=r,t.featuresLength=r,t.pointsLength=r,t.pointCount=r,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",ht.FLOAT,3);var n=function(t,e){var r=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",ht.UNSIGNED_SHORT,1),t.batchIds)){var n=e.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=t.batchTableJson,a=t.batchTableBinary;r=new Nt(i,a,n)}return r}(t,e);return{featureTable:e,batchTable:n}}function fe(t,e,r){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",ht.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){var n=e.getPropertyArray("POSITION_QUANTIZED",ht.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",ht.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",ht.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=ne(t,n,r)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function le(t,e,r){if(!t.attributes.colors){var n=null;e.hasProperty("RGBA")?(n=e.getPropertyArray("RGBA",ht.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?n=e.getPropertyArray("RGB",ht.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(n=e.getPropertyArray("RGB565",ht.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=Ut(t,n,r)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",ht.UNSIGNED_BYTE,4))}function he(t,e){if(!t.attributes.normals){var r=null;e.hasProperty("NORMAL")?r=e.getPropertyArray("NORMAL",ht.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(r=e.getPropertyArray("NORMAL_OCT16P",ht.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){for(var r=new Float32Array(3*t.pointsLength),n=0;n<t.pointsLength;n++)ee(e[2*n],e[2*n+1],re),re.toArray(r,3*n);return{type:ht.FLOAT,size:2,value:r}}return{type:ht.FLOAT,size:2,value:e}}(t,r)}}function ye(t,e,r,n,i){return de.apply(this,arguments)}function de(){return(de=l()(c.a.mark((function t(e,r,n,i,a){var o,u,s,f,l,h,y,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((f=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(s=f.properties),!(l=r.getExtension("3DTILES_draco_point_compression"))){t.next=15;break}if(u=l.properties,h=l.byteOffset,y=l.byteLength,u&&Number.isFinite(h)&&y){t.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:o=e.featureTableBinary.slice(h,h+y),e.hasPositions=Number.isFinite(u.POSITION),e.hasColors=Number.isFinite(u.RGB)||Number.isFinite(u.RGBA),e.hasNormals=Number.isFinite(u.NORMAL),e.hasBatchIds=Number.isFinite(u.BATCH_ID),e.isTranslucent=Number.isFinite(u.RGBA);case 15:if(o){t.next=17;break}return t.abrupt("return",!0);case 17:return d={buffer:o,properties:ae(ae({},u),s),featureTableProperties:u,batchTableProperties:s,dequantizeInShader:!1},t.next=20,pe(e,d,i,a);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pe(t,e,r,n){return ve.apply(this,arguments)}function ve(){return(ve=l()(c.a.mark((function t(e,r,n,i){var a,o,u,s,f,l,h,y,d,p,v,b,g,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.parse,t.next=3,a(r.buffer,ot,{draco:{extraAttributes:r.batchTableProperties||{}}});case 3:if(o=t.sent,u=o.attributes.POSITION&&o.attributes.POSITION.value,s=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,f=o.attributes.NORMAL&&o.attributes.NORMAL.value,l=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,h=u&&o.attributes.POSITION.value.quantization,y=f&&o.attributes.NORMAL.value.quantization,h&&(d=o.POSITION.data.quantization,p=d.range,e.quantizedVolumeScale=new yt.a(p,p,p),e.quantizedVolumeOffset=new yt.a(d.minValues),e.quantizedRange=(1<<d.quantizationBits)-1,e.isQuantizedDraco=!0),y&&(e.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0),v={},r.batchTableProperties)for(b=0,g=Object.keys(r.batchTableProperties);b<g.length;b++)m=g[b],o.attributes[m]&&o.attributes[m].value&&(v[m.toLowerCase()]=o.attributes[m].value);e.attributes=ae({positions:u,colors:Ut(e,s),normals:f,batchIds:l},v);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function be(t,e){if(!t)throw new Error(e)}var ge=r(27),me=ge.a._parseImageNode,Oe="undefined"!=typeof Image,we="undefined"!=typeof ImageBitmap,ke=Boolean(me),Te=!!ge.b||ke;function Ee(t){var e=je(t);if(!e)throw new Error("Not an image");return e}function Ae(t){switch(Ee(t)){case"data":return t;case"image":case"imagebitmap":var e=document.createElement("canvas"),r=e.getContext("2d");if(r)return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:return be(!1)}}function je(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"===_()(t)&&t.data&&t.width&&t.height?"data":null}var xe=/^data:image\/svg\+xml/,Se=/\.svg((\?|#).*)?$/;function _e(t){return t&&(xe.test(t)||Se.test(t))}function Ie(t,e){if(_e(e)){var r=(new TextDecoder).decode(t);return"data:image/svg+xml;base64,".concat(btoa(r))}return Pe(t,e)}function Pe(t,e){if(_e(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function Ne(t,e,r){return Le.apply(this,arguments)}function Le(){return(Le=l()(c.a.mark((function t(e,r,n){var i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Ie(e,n),a=self.URL||self.webkitURL,o="string"!=typeof i&&a.createObjectURL(i),t.prev=3,t.next=6,Re(o||i,r);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,o&&a.revokeObjectURL(o),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})))).apply(this,arguments)}function Re(t,e){return Me.apply(this,arguments)}function Me(){return(Me=l()(c.a.mark((function t(e,r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=new Image).src=e,!(r.image&&r.image.decode&&n.decode)){t.next=6;break}return t.next=5,n.decode();case 5:return t.abrupt("return",n);case 6:return t.next=8,new Promise((function(t,r){try{n.onload=function(){return t(n)},n.onerror=function(t){return r(new Error("Could not load image ".concat(e,": ").concat(t)))}}catch(t){r(t)}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var De={},Ue=!0;function Ce(t,e,r){return Be.apply(this,arguments)}function Be(){return(Be=l()(c.a.mark((function t(e,r,n){var i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!_e(n)){t.next=7;break}return t.next=3,Ne(e,r,n);case 3:a=t.sent,i=a,t.next=8;break;case 7:i=Pe(e,n);case 8:return o=r&&r.imagebitmap,t.next=11,Fe(i,o);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fe(t){return Ve.apply(this,arguments)}function Ve(){return(Ve=l()(c.a.mark((function t(e){var r,n=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ge(r=n.length>1&&void 0!==n[1]?n[1]:null)&&Ue||(r=null),!r){t.next=13;break}return t.prev=3,t.next=6,createImageBitmap(e,r);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0),Ue=!1;case 13:return t.next=15,createImageBitmap(e);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function Ge(t){for(var e in t||De)return!1;return!0}function ze(t){var e=qe(t);return function(t){var e=qe(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,!1)))return null;return{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}(e)||function(t){var e=qe(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;var r=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var r=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:r}}(),n=r.tableMarkers,i=r.sofMarkers,a=2;for(;a+9<e.byteLength;){var o=e.getUint16(a,!1);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(a+5,!1),width:e.getUint16(a+7,!1)};if(!n.has(o))return null;a+=2,a+=e.getUint16(a,!1)}return null}(e)||function(t){var e=qe(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}(e)||function(t){var e=qe(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}(e)}function qe(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function He(t,e){var r=(ze(t)||{}).mimeType,n=ge.a._parseImageNode;return be(n),n(t,r,e)}function We(){return(We=l()(c.a.mark((function t(e,r,n){var i,a,o,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(r=r||{}).image||{},a=i.type||"auto",o=(n||{}).url,u=Ke(a),t.t0=u,t.next="imagebitmap"===t.t0?8:"image"===t.t0?12:"data"===t.t0?16:20;break;case 8:return t.next=10,Ce(e,r,o);case 10:return s=t.sent,t.abrupt("break",21);case 12:return t.next=14,Ne(e,r,o);case 14:return s=t.sent,t.abrupt("break",21);case 16:return t.next=18,He(e,r);case 18:return s=t.sent,t.abrupt("break",21);case 20:be(!1);case 21:return"data"===a&&(s=Ae(s)),t.abrupt("return",s);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ke(t){switch(t){case"auto":case"data":return function(){if(we)return"imagebitmap";if(Oe)return"image";if(Te)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return we||Oe||Te;case"imagebitmap":return we;case"image":return Oe;case"data":return Te;case"html":return Oe;case"ndarray":return Te;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}var Qe={id:"image",name:"Images",version:"2.3.9",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(t,e,r){return We.apply(this,arguments)},tests:[function(t){return Boolean(ze(new DataView(t)))}],options:{image:{type:"auto",decode:!0}}};function Ye(t,e,r){if(t.byteLength<=e+r)return"";for(var n=new DataView(t),i="",a=0;a<r;a++)i+=String.fromCharCode(n.getUint8(e+a));return i}function Ze(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return Ye(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var r=0;return Ye(t,r,e)}return""}(t),'"'))}}r(40);function Je(t){return t+3&-4}function Xe(t,e,r){return function(t,e,r){var n=void 0!==r?new Uint8Array(t).subarray(e,e+r):new Uint8Array(t).subarray(e);return new Uint8Array(n).buffer}(t,e,r)}function $e(t,e,r){var n;if(t instanceof ArrayBuffer)n=new Uint8Array(t);else{var i=t.byteOffset,a=t.byteLength;n=new Uint8Array(t.buffer,i,a)}return e.set(n,r),r+Je(n.byteLength)}function tr(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function er(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;var r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return r.substr(0,r.lastIndexOf("/")+1)+t}function rr(t,e,r){var n=t.bufferViews[r];tr(n);var i=e[n.buffer];tr(i);var a=(n.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,a,n.byteLength)}var nr=["SCALAR","VEC2","VEC3","VEC4"],ir=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),ar={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},or={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ur={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function sr(t){return nr[t-1]||nr[0]}function cr(t){var e=ir.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function fr(t,e){var r=ur[t.componentType],n=ar[t.type],i=or[t.componentType],a=t.count*n,o=t.count*n*i;return tr(o>=0&&o<=e.byteLength),{ArrayType:r,length:a,byteLength:o}}var lr=function(){function t(e){if(Y()(this,t),e instanceof t)return e;e||(e={json:{asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},buffers:[]}),this.byteLength=0,this.gltf=e,tr(this.gltf.json)}return J()(t,[{key:"getApplicationData",value:function(t){return this.json[t]}},{key:"getExtraData",value:function(t){return(this.json.extras||{})[t]}},{key:"getExtension",value:function(t){var e=this.getUsedExtensions().find((function(e){return e===t})),r=this.json.extensions||{};return e?r[t]||!0:null}},{key:"getRequiredExtension",value:function(t){return this.getRequiredExtensions().find((function(e){return e===t}))?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(t,e){return(t.extensions||{})[e]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,e){if("object"===_()(e))return e;var r=this.json[t]&&this.json[t][e];if(!r)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return r}},{key:"getTypedArrayForBufferView",value:function(t){var e=(t=this.getBufferView(t)).buffer,r=this.gltf.buffers[e];tr(r);var n=(t.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,n,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),r=this.getBuffer(e.buffer).data,n=fr(t,e),i=n.ArrayType,a=n.length;return new i(r,e.byteOffset+t.byteOffset,a)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),r=this.getBuffer(e.buffer).data,n=e.byteOffset||0;return new Uint8Array(r,n,e.byteLength)}},{key:"addApplicationData",value:function(t,e){return this.json[t]=e,this}},{key:"addExtraData",value:function(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}},{key:"addObjectExtension",value:function(t,e,r){return tr(r),t.extensions=t.extensions||{},t.extensions[e]=r,this.registerUsedExtension(e),this}},{key:"setObjectExtension",value:function(t,e,r){(t.extensions||{})[e]=r}},{key:"removeObjectExtension",value:function(t,e){var r=t.extensions||{},n=r[e];return delete r[e],n}},{key:"addExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tr(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}},{key:"addRequiredExtension",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tr(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(e){return e===t}))||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(e){return e===t}))||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]}},{key:"addMesh",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=this._addAttributes(t),i={primitives:[{attributes:n,indices:e,mode:r}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}},{key:"addImage",value:function(t,e){var r;e=e||((r=ze(t))?r.mimeType:null);var n={bufferView:this.addBufferView(t),mimeType:e};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}},{key:"addBufferView",value:function(t){var e=t.byteLength;tr(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var r={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=Je(e),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,e){var r={bufferView:t,type:sr(e.size),componentType:e.componentType,count:e.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},r=this.addBufferView(t),n={size:e.size,componentType:cr(t),count:Math.round(t.length/e.size)};return this.addAccessor(r,Object.assign(n,e))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var t=this.byteLength,e=new ArrayBuffer(t),r=new Uint8Array(e),n=0,i=0;i<this.sourceBuffers.length;i++){n=$e(this.sourceBuffers[i],r,n)}this.json.buffers[0].byteLength=t,this.arrayBuffer=e,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(t,e){for(var r=!0;r;){var n=t.indexOf(e);n>-1?t.splice(n,1):r=!1}}},{key:"json",get:function(){return this.gltf.json}}]),t}();function hr(t){var e={};for(var r in t){var n=t[r];if("indices"!==r){var i=yr(n);e[r]=i}}return e}function yr(t,e){var r=function(t,e){var r=t,n=1,i=0;t&&t.value&&(r=t.value,n=t.size||1);r&&(ArrayBuffer.isView(r)||(r=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return null;if(Array.isArray(t))return new e(t);if(r&&!(t instanceof e))return new e(t);return t}(r,Float32Array)),i=r.length/n);return{buffer:r,size:n,count:i}}(t),n=r.buffer,i=r.size;return{value:n,size:i,bufferView:null,byteOffset:0,count:r.count,type:sr(i),componentType:cr(n)}}function dr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var vr=c.a.mark(jr);function br(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mr(t,e,r){return Or.apply(this,arguments)}function Or(){return(Or=l()(c.a.mark((function t(e,r,n){var i,a,o,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.gltf.decompressMeshes){t.next=2;break}return t.abrupt("return");case 2:i=new lr(e),a=[],o=br(jr(i));try{for(o.s();!(u=o.n()).done;)s=u.value,i.getObjectExtension(s,"KHR_draco_mesh_compression")&&a.push(kr(s,i,r,n))}catch(t){o.e(t)}finally{o.f()}return t.next=8,Promise.all(a);case 8:i.removeExtension("KHR_draco_mesh_compression");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wr(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new lr(t),i=br(n.json.meshes||[]);try{for(i.s();!(e=i.n()).done;){var a=e.value;Er(a,r),n.addRequiredExtension("KHR_draco_mesh_compression")}}catch(t){i.e(t)}finally{i.f()}}function kr(t,e,r,n){return Tr.apply(this,arguments)}function Tr(){return(Tr=l()(c.a.mark((function t(e,r,n,i){var a,o,u,s,f,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.getObjectExtension(e,"KHR_draco_mesh_compression"),o=r.getTypedArrayForBufferView(a.bufferView),u=Xe(o.buffer,o.byteOffset),s=i.parse,f=pr({},n),delete n["3d-tiles"],t.next=8,s(u,ot,f,i);case 8:l=t.sent,e.attributes=hr(l.attributes),l.indices&&(e.indices=yr(l.indices)),Ar(e);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Er(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!n.DracoWriter||!n.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var a=n.DracoWriter.encodeSync({attributes:t}),o=i.parseSync,u=o({attributes:t}),s=n._addFauxAttributes(u.attributes),c=n.addBufferView(a),f={primitives:[{attributes:s,mode:r,extensions:x()({},"KHR_draco_mesh_compression",{bufferView:c,attributes:s})}]};return f}function Ar(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function jr(t){var e,r,n,i,a,o;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=br(t.json.meshes||[]),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=24;break}n=r.value,i=br(n.primitives),u.prev=6,i.s();case 8:if((a=i.n()).done){u.next=14;break}return o=a.value,u.next=12,o;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),i.e(u.t0);case 19:return u.prev=19,i.f(),u.finish(19);case 22:u.next=3;break;case 24:u.next=29;break;case 26:u.prev=26,u.t1=u.catch(1),e.e(u.t1);case 29:return u.prev=29,e.f(),u.finish(29);case 32:case"end":return u.stop()}}),vr,null,[[1,26,29,32],[6,16,19,22]])}function xr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _r(t,e){var r=new lr(t),n=r.json,i=r.getExtension("KHR_lights_punctual");i&&(r.json.lights=i.lights,r.removeExtension("KHR_lights_punctual"));var a,o=xr(n.nodes||[]);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=r.getObjectExtension(u,"KHR_lights_punctual");s&&(u.light=s.light),r.removeObjectExtension(u,"KHR_lights_punctual")}}catch(t){o.e(t)}finally{o.f()}}function Ir(t,e){var r=new lr(t),n=r.json;if(n.lights){var i=r.addExtension("KHR_lights_punctual");tr(!i.lights),i.lights=n.lights,delete n.lights}if(r.json.lights){var a,o=xr(r.json.lights);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=u.node;r.addObjectExtension(s,"KHR_lights_punctual",u)}}catch(t){o.e(t)}finally{o.f()}delete r.json.lights}}function Pr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lr(t,e){var r=new lr(t),n=r.json;r.removeExtension("KHR_materials_unlit");var i,a=Pr(n.materials||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.extensions&&o.extensions.KHR_materials_unlit&&(o.unlit=!0),r.removeObjectExtension(o,"KHR_materials_unlit")}}catch(t){a.e(t)}finally{a.f()}}function Rr(t,e){var r=new lr(t),n=r.json;if(r.materials){var i,a=Pr(n.materials);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.unlit&&(delete o.unlit,r.addObjectExtension(o,"KHR_materials_unlit",{}),r.addExtension("KHR_materials_unlit"))}}catch(t){a.e(t)}finally{a.f()}}}function Mr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Dr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ur(t,e){var r=new lr(t),n=r.json,i=r.getExtension("KHR_techniques_webgl");if(i){var a,o=function(t,e){var r=t.programs,n=void 0===r?[]:r,i=t.shaders,a=void 0===i?[]:i,o=t.techniques,u=void 0===o?[]:o,s=new TextDecoder;return a.forEach((function(t){if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=s.decode(e.getTypedArrayForBufferView(t.bufferView))})),n.forEach((function(t){t.fragmentShader=a[t.fragmentShader],t.vertexShader=a[t.vertexShader]})),u.forEach((function(t){t.program=n[t.program]})),u}(i,r),u=Mr(n.materials||[]);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=r.getObjectExtension(s,"KHR_techniques_webgl");c&&(s.technique=Object.assign({},c,o[c.technique]),s.technique.values=Br(s.technique,r)),r.removeObjectExtension(s,"KHR_techniques_webgl")}}catch(t){u.e(t)}finally{u.f()}r.removeExtension("KHR_techniques_webgl")}}function Cr(t,e){}function Br(t,e){var r=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((function(e){t.uniforms[e].value&&!(e in r)&&(r[e]=t.uniforms[e].value)})),Object.keys(r).forEach((function(t){"object"===_()(r[t])&&void 0!==r[t].index&&(r[t].texture=e.getTexture(r[t].index))})),r}var Fr={KHR_draco_mesh_compression:i,KHR_lights_punctual:a,KHR_materials_unlit:o,KHR_techniques_webgl:u};function Vr(t){return Gr.apply(this,arguments)}function Gr(){return(Gr=l()(c.a.mark((function t(e){var r,n,i,a,o,u=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2?u[2]:void 0,r.gltf=r.gltf||{},t.t0=c.a.keys(Fr);case 4:if((t.t1=t.t0()).done){t.next=14;break}if(i=t.t1.value,a=r.gltf.excludeExtensions||{},i in a&&!a[i]){t.next=12;break}return o=Fr[i],t.next=12,o.decode(e,r,n);case 12:t.next=4;break;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function qr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new DataView(t),i=r.magic,a=void 0===i?1735152710:i,o=n.getUint32(e,!1);return o===a||1735152710===o}function Hr(t,e,r,n){k(t.header.byteLength>20);var i=e.getUint32(r+0,!0),a=e.getUint32(r+4,!0);return r+=8,k(0===a),Kr(t,e,r,i,n),r+=i,r+=Qr(t,e,r,t.header.byteLength,n)}function Wr(t,e,r,n){return k(t.header.byteLength>20),function(t,e,r,n){for(;r+8<=t.header.byteLength;){var i=e.getUint32(r+0,!0),a=e.getUint32(r+4,!0);switch(r+=8,a){case 1313821514:Kr(t,e,r,i,n);break;case 5130562:Qr(t,e,r,i,n);break;case 0:n.glb.strict||Kr(t,e,r,i,n);break;case 1:n.glb.strict||Qr(t,e,r,i,n)}r+=Je(i)}}(t,e,r,n),r+t.header.byteLength}function Kr(t,e,r,n,i){var a=new Uint8Array(e.buffer,r,n),o=new TextDecoder("utf8").decode(a);return t.json=JSON.parse(o),Je(n)}function Qr(t,e,r,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:r,byteLength:n,arrayBuffer:e.buffer}),Je(n)}function Yr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Zr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $r,tn={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},en={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},rn=function(){function t(e){Y()(this,t),this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}return J()(t,[{key:"normalize",value:function(t,e){this.json=t.json;var r=t.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(r.asset.version))}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),function(t,e){var r,n=new lr(t),i=n.json,a=Yr(i.images||[]);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=n.removeObjectExtension(o,"KHR_binary_glTF");u&&Object.assign(o,u)}}catch(t){a.e(t)}finally{a.f()}i.buffers&&i.buffers[0]&&delete i.buffers[0].uri,n.removeExtension("KHR_binary_glTF")}(t),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var e in tn)this._convertTopLevelObjectToArray(t,e)}},{key:"_convertTopLevelObjectToArray",value:function(t,e){var r=t[e];if(r&&!Array.isArray(r))for(var n in t[e]=[],r){var i=r[n];i.id=i.id||n;var a=t[e].length;t[e].push(i),this.idToIndexMap[e][n]=a}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var e in tn)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var r,n=Jr(t.textures);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._convertTextureIds(i)}}catch(t){n.e(t)}finally{n.f()}var a,o=Jr(t.meshes);try{for(o.s();!(a=o.n()).done;){var u=a.value;this._convertMeshIds(u)}}catch(t){o.e(t)}finally{o.f()}var s,c=Jr(t.nodes);try{for(c.s();!(s=c.n()).done;){var f=s.value;this._convertNodeIds(f)}}catch(t){c.e(t)}finally{c.f()}var l,h=Jr(t.scenes);try{for(h.s();!(l=h.n()).done;){var y=l.value;this._convertSceneIds(y)}}catch(t){h.e(t)}finally{h.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var e,r=Jr(t.primitives);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=n.attributes,a=n.indices,o=n.material;for(var u in i)i[u]=this._convertIdToIndex(i[u],"accessor");a&&(n.indices=this._convertIdToIndex(a,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}catch(t){r.e(t)}finally{r.f()}}},{key:"_convertNodeIds",value:function(t){var e=this;t.children&&(t.children=t.children.map((function(t){return e._convertIdToIndex(t,"node")})))}},{key:"_convertSceneIds",value:function(t){var e=this;t.nodes&&(t.nodes=t.nodes.map((function(t){return e._convertIdToIndex(t,"node")})))}},{key:"_convertIdsToIndices",value:function(t,e){var r,n=Jr(t[e]);try{for(n.s();!(r=n.n()).done;){var i=r.value;for(var a in i){var o=i[a],u=this._convertIdToIndex(o,a);i[a]=u}}}catch(t){n.e(t)}finally{n.f()}}},{key:"_convertIdToIndex",value:function(t,e){var r=en[e];if(r in this.idToIndexMap){var n=this.idToIndexMap[r][t];if(!Number.isFinite(n))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return n}return t}},{key:"_updateObjects",value:function(t){var e,r=Jr(this.json.buffers);try{for(r.s();!(e=r.n()).done;){delete e.value.type}}catch(t){r.e(t)}finally{r.f()}}}]),t}();function nn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new rn).normalize(t,e)}function an(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?an(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var un={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sn={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},cn={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},fn={magFilter:cn.TEXTURE_MAG_FILTER,minFilter:cn.TEXTURE_MIN_FILTER,wrapS:cn.TEXTURE_WRAP_S,wrapT:cn.TEXTURE_WRAP_T},ln=($r={},x()($r,cn.TEXTURE_MAG_FILTER,cn.LINEAR),x()($r,cn.TEXTURE_MIN_FILTER,cn.NEAREST_MIPMAP_LINEAR),x()($r,cn.TEXTURE_WRAP_S,cn.REPEAT),x()($r,cn.TEXTURE_WRAP_,cn.REPEAT),$r);var hn=function(){function t(){Y()(this,t)}return J()(t,[{key:"postProcess",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.json,n=t.buffers,i=void 0===n?[]:n,a=t.images,o=void 0===a?[]:a,u=t.baseUri,s=void 0===u?"":u;return tr(r),this.baseUri=s,this.json=r,this.buffers=i,this.images=o,this._resolveTree(this.json,e),this.json}},{key:"_resolveTree",value:function(t){var e=this;t.bufferViews&&(t.bufferViews=t.bufferViews.map((function(t,r){return e._resolveBufferView(t,r)}))),t.images&&(t.images=t.images.map((function(t,r){return e._resolveImage(t,r)}))),t.samplers&&(t.samplers=t.samplers.map((function(t,r){return e._resolveSampler(t,r)}))),t.textures&&(t.textures=t.textures.map((function(t,r){return e._resolveTexture(t,r)}))),t.accessors&&(t.accessors=t.accessors.map((function(t,r){return e._resolveAccessor(t,r)}))),t.materials&&(t.materials=t.materials.map((function(t,r){return e._resolveMaterial(t,r)}))),t.meshes&&(t.meshes=t.meshes.map((function(t,r){return e._resolveMesh(t,r)}))),t.nodes&&(t.nodes=t.nodes.map((function(t,r){return e._resolveNode(t,r)}))),t.skins&&(t.skins=t.skins.map((function(t,r){return e._resolveSkin(t,r)}))),t.scenes&&(t.scenes=t.scenes.map((function(t,r){return e._resolveScene(t,r)}))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,e){if("object"===_()(e))return e;var r=this.json[t]&&this.json[t][e];return r||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),r}},{key:"_resolveScene",value:function(t,e){var r=this;return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map((function(t){return r.getNode(t)})),t}},{key:"_resolveNode",value:function(t,e){var r=this;return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map((function(t){return r.getNode(t)}))),void 0!==t.mesh&&(t.mesh=this.getMesh(t.mesh)),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,e){var r=this;return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map((function(t){var e=(t=on({},t)).attributes;for(var n in t.attributes={},e)t.attributes[n]=r.getAccessor(e[n]);return void 0!==t.indices&&(t.indices=r.getAccessor(t.indices)),void 0!==t.material&&(t.material=r.getMaterial(t.material)),t}))),t}},{key:"_resolveMaterial",value:function(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture=on({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=on({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=on({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.pbrMetallicRoughness){t.pbrMetallicRoughness=on({},t.pbrMetallicRoughness);var r=t.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=on({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=on({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,e){var r,n;if(t.id=t.id||"accessor-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(r=t.componentType,sn[r]),t.components=(n=t.type,un[n]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var i=t.bufferView.buffer,a=fr(t,t.bufferView),o=a.ArrayType,u=a.length,s=(t.bufferView.byteOffset||0)+i.byteOffset;t.value=new o(i.arrayBuffer,s,u)}return t}},{key:"_resolveTexture",value:function(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):ln,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,e){for(var r in t.id=t.id||"sampler-".concat(e),t.parameters={},t){var n=this._enumSamplerParameter(r);void 0!==n&&(t.parameters[n]=t[r])}return t}},{key:"_enumSamplerParameter",value:function(t){return fn[t]}},{key:"_resolveImage",value:function(t,e){t.id=t.id||"image-".concat(e),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));var r=this.images[e];return r&&(t.image=r),t}},{key:"_resolveBufferView",value:function(t,e){t.id=t.id||"bufferView-".concat(e);var r=t.buffer;t.buffer=this.buffers[r];var n=this.buffers[r].arrayBuffer,i=this.buffers[r].byteOffset||0;return"byteOffset"in t&&(i+=t.byteOffset),t.data=new Uint8Array(n,i,t.byteLength),t}},{key:"_resolveCamera",value:function(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}}]),t}();function yn(t,e){return(new hn).postProcess(t,e)}function dn(t,e){return pn.apply(this,arguments)}function pn(){return(pn=l()(c.a.mark((function t(e,r){var n,i,a,o,u,s,f=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f.length>2&&void 0!==f[2]?f[2]:0,i=f.length>3?f[3]:void 0,a=f.length>4?f[4]:void 0,vn(e,r,n,i),nn(e,{normalize:i.gltf.normalize}),o=[],!i.gltf.loadBuffers||!e.json.buffers){t.next=9;break}return t.next=9,bn(e,i,a);case 9:return i.gltf.loadImages&&(u=mn(e,i,a),o.push(u)),s=Vr(e,i,a),o.push(s),t.next=14,Promise.all(o);case 14:return t.abrupt("return",i.gltf.postProcess?yn(e,i):e);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vn(t,e,r,n){(n.uri&&(t.baseUri=n.uri),e instanceof ArrayBuffer&&!qr(e,r,n))&&(e=(new TextDecoder).decode(e));if("string"==typeof e)t.json=Ze(e);else if(e instanceof ArrayBuffer){var i={};r=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new DataView(e);t.type=zr(n,r+0),t.version=n.getUint32(r+4,!0);var i=n.getUint32(r+8,!0);switch(t.header={byteOffset:r,byteLength:i},t.json={},t.binChunks=[],r+=12,t.version){case 1:return Hr(t,n,r,{});case 2:return Wr(t,n,r,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(i,e,r,n),tr("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),t._glb=i,t.json=i.json}else tr(!1,"GLTF: must be ArrayBuffer or string");var a=t.json.buffers||[];if(t.buffers=new Array(a.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var o=t._glb.binChunks;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}var u=t.json.images||[];t.images=new Array(u.length).fill({})}function bn(t,e,r){return gn.apply(this,arguments)}function gn(){return(gn=l()(c.a.mark((function t(e,r,n){var i,a,o,u,s,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.json.buffers.length)){t.next=18;break}if(!(a=e.json.buffers[i]).uri){t.next=15;break}return tr(o=n.fetch),u=er(a.uri,r),t.next=9,o(u);case 9:return s=t.sent,t.next=12,s.arrayBuffer();case 12:f=t.sent,e.buffers[i]={arrayBuffer:f,byteOffset:0,byteLength:f.byteLength},delete a.uri;case 15:++i,t.next=1;break;case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mn(t,e,r){return On.apply(this,arguments)}function On(){return(On=l()(c.a.mark((function t(e,r,n){var i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.json.images||[],a=[],o=0;o<i.length;++o)a.push(wn(e,i[o],o,r,n));return t.next=5,Promise.all(a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wn(t,e,r,n,i){return kn.apply(this,arguments)}function kn(){return(kn=l()(c.a.mark((function t(e,r,n,i,a){var o,u,s,f,l,h,y;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.fetch,u=a.parse,!r.uri){t.next=9;break}return f=er(r.uri,i),t.next=5,o(f);case 5:return l=t.sent,t.next=8,l.arrayBuffer();case 8:s=t.sent;case 9:return Number.isFinite(r.bufferView)&&(h=rr(e.json,e.buffers,r.bufferView),s=Xe(h.buffer,h.byteOffset,h.byteLength)),tr(s,"glTF image has no data"),t.next=13,u(s,Qe,{},a);case 13:y=t.sent,e.images[n]=y;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var An={id:"gltf",name:"glTF",version:"2.3.9",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(t){return xn.apply(this,arguments)},options:{gltf:{normalize:!1,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},baseUri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}},jn=An;function xn(){return(xn=l()(c.a.mark((function t(e){var r,n,i,a,o,u=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2?u[2]:void 0,(r=En(En({},An.options),r)).gltf=En(En({},An.options.gltf),r.gltf),Sn(r),i=r.byteOffset,a=void 0===i?0:i,o={},t.next=9,dn(o,e,a,r,n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Sn(t){"fetchImages"in t&&(t.gltf.loadImages=t.fetchImages),"createImages"in t&&(t.gltf.loadImages=t.createImages),"fetchLinkedResources"in t&&(t.gltf.fetchBuffers=t.fetchLinkedResources),"decompress"in t&&(t.gltf.decompressMeshes=t.decompress),"decompress"in t.gltf&&(t.gltf.decompressMeshes=t.gltf.decompress),"postProcess"in t&&(t.gltf.postProcess=t.postProcess)}var _n=0,In=1;function Pn(t,e,r,n){t.rotateYtoZ=!0;var i=t.byteOffset+t.byteLength-r;if(0===i)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=Xe(e,r,i),t.gltfByteOffset=0,t.gltfByteLength=i,r%4==0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}function Nn(t,e,r,n){return Ln.apply(this,arguments)}function Ln(){return(Ln=l()(c.a.mark((function t(e,r,n,i){var a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n["3d-tiles"]||{},Rn(e,r,n),!a.loadGLTF){t.next=16;break}if(o=i.parse,u=i.fetch,!e.gltfUrl){t.next=9;break}return t.next=7,u(e.gltfUrl,n);case 7:e.gltfArrayBuffer=t.sent,e.gltfByteOffset=0;case 9:if(!e.gltfArrayBuffer){t.next=16;break}return t.next=12,o(e.gltfArrayBuffer,jn,n,i);case 12:e.gltf=t.sent,delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rn(t,e,r){switch(e){case _n:var n=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=(new TextDecoder).decode(n);t.gltfUrl=i.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case In:break;default:throw new Error("b3dm: Illegal glTF format field")}}function Mn(t,e,r,n,i){return Dn.apply(this,arguments)}function Dn(){return(Dn=l()(c.a.mark((function t(e,r,n,i,a){var o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Un(e,r,n,i,a),t.next=3,Nn(e,In,i,a);case 3:return o=e.gltf||{},(u=o.extensions)&&u.CESIUM_RTC&&(e.rtcCenter=u.CESIUM_RTC.center),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Un(t,e,r,n,i){r=Pn(t,e,r=Mt(t,e,r=Rt(t,e,r=Lt(t,e,r))),n);var a=new bt(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=a.getGlobalProperty("RTC_CENTER",ht.FLOAT,3),r}var Cn=r(74),Bn=r(75),Fn=r(73),Vn=r(36),Gn=r(19),zn=r(5),qn=(Math.max(6378137,6378137,6356752.314245179),function(t){return t}),Hn=new yt.a;function Wn(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn;return Object(qt.e)(t)?(e[0]=r(t[0]),e[1]=r(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=r(t.longitude),e[1]=r(t.latitude),e[2]=t.height):(e[0]=r(t.x),e[1]=r(t.y),e[2]=t.z),e}function Kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn;return Wn(t,e,qt.b._cartographicRadians?qn:qt.g)}function Qn(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn;return Object(qt.e)(e)?(e[0]=r(t[0]),e[1]=r(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=r(t[0]),e.latitude=r(t[1]),e.height=t[2]):(e.x=r(t[0]),e.y=r(t[1]),e.z=t[2]),e}function Yn(t,e){return Qn(t,e,qt.b._cartographicRadians?qn:qt.f)}var Zn=new yt.a,Jn=new yt.a,Xn=new yt.a;var $n=new yt.a,ti={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},ei={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},ri={east:new yt.a,north:new yt.a,up:new yt.a,west:new yt.a,south:new yt.a,down:new yt.a},ni=new yt.a,ii=new yt.a,ai=new yt.a;function oi(t,e,r,n,i,a){var o,u,s,c=ti[e]&&ti[e][r];Object(Gn.a)(c&&(!n||n===c));var f=$n.copy(i);if(Object(qt.c)(f.x,0,1e-14)&&Object(qt.c)(f.y,0,1e-14)){var l=Math.sign(f.z);o=ni.fromArray(ei[e]),"east"!==e&&"west"!==e&&o.scale(l),u=ii.fromArray(ei[r]),"east"!==r&&"west"!==r&&u.scale(l),s=ai.fromArray(ei[n]),"east"!==n&&"west"!==n&&s.scale(l)}else{var h=ri.up,y=ri.east,d=ri.north;y.set(-f.y,f.x,0).normalize(),t.geodeticSurfaceNormal(f,h),d.copy(h).cross(y);var p=ri.west,v=ri.south;ri.down.copy(h).scale(-1),p.copy(y).scale(-1),v.copy(d).scale(-1),o=ri[e],u=ri[r],s=ri[n]}return a[0]=o.x,a[1]=o.y,a[2]=o.z,a[3]=0,a[4]=u.x,a[5]=u.y,a[6]=u.z,a[7]=0,a[8]=s.x,a[9]=s.y,a[10]=s.z,a[11]=0,a[12]=f.x,a[13]=f.y,a[14]=f.z,a[15]=1,a}var ui,si=new yt.a,ci=new yt.a,fi=new yt.a,li=new yt.a,hi=new yt.a,yi=new yt.a,di=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(Ct.a)(this,t),Object(Gn.a)(e>=0),Object(Gn.a)(r>=0),Object(Gn.a)(n>=0),this.radii=new yt.a(e,r,n),this.radiiSquared=new yt.a(e*e,r*r,n*n),this.radiiToTheFourth=new yt.a(e*e*e*e,r*r*r*r,n*n*n*n),this.oneOverRadii=new yt.a(0===e?0:1/e,0===r?0:1/r,0===n?0:1/n),this.oneOverRadiiSquared=new yt.a(0===e?0:1/(e*e),0===r?0:1/(r*r),0===n?0:1/(n*n)),this.minimumRadius=Math.min(e,r,n),this.maximumRadius=Math.max(e,r,n),this.centerToleranceSquared=Zt.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(Bt.a)(t,null,[{key:"WGS84",get:function(){return ui=ui||new t(6378137,6378137,6356752.314245179)}}]),Object(Bt.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=ci,n=fi,i=Object(Vn.a)(t,3),a=i[2];this.geodeticSurfaceNormalCartographic(t,r),n.copy(this.radiiSquared).scale(r);var o=Math.sqrt(r.dot(n));return n.scale(1/o),r.scale(a),n.add(r),n.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];yi.from(t);var r=this.scaleToGeodeticSurface(yi,li);if(r){var n=this.geodeticSurfaceNormal(r,ci),i=hi;i.copy(yi).subtract(r);var a=Math.atan2(n.y,n.x),o=Math.asin(n.z),u=Math.sign(zn.d(i,yi))*zn.g(i);return Yn([a,o,u],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fn.a;return oi(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Fn.a;return oi(this,t,e,r,n,i)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return si.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=Kn(t),n=r[0],i=r[1],a=Math.cos(i);return si.set(a*Math.cos(n),a*Math.sin(n),Math.sin(i)).normalize(),si.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return si.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new yt.a,n=e.oneOverRadii,i=e.oneOverRadiiSquared,a=e.centerToleranceSquared;Zn.from(t);var o=t.x,u=t.y,s=t.z,c=n.x,f=n.y,l=n.z,h=o*o*c*c,y=u*u*f*f,d=s*s*l*l,p=h+y+d,v=Math.sqrt(1/p);if(Number.isFinite(v)){var b=Jn;if(b.copy(t).scale(v),p<a)return b.to(r);var g=i.x,m=i.y,O=i.z,w=Xn;w.set(b.x*g*2,b.y*m*2,b.z*O*2);var k,T,E,A,j=(1-v)*t.len()/(.5*w.len()),x=0;do{var S=(k=1/(1+(j-=x)*g))*k,_=(T=1/(1+j*m))*T,I=(E=1/(1+j*O))*E,P=S*k,N=_*T,L=I*E,R=h*P*g+y*N*m+d*L*O,M=-2*R;x=(A=h*S+y*_+d*I-1)/M}while(Math.abs(A)>Zt.a.EPSILON12);return Zn.scale([k,T,E]).to(r)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];li.from(t);var r=li.x,n=li.y,i=li.z,a=this.oneOverRadiiSquared,o=1/Math.sqrt(r*r*a.x+n*n*a.y+i*i*a.z);return li.multiplyScalar(o).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return li.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return li.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(Gn.a)(Object(qt.c)(this.radii.x,this.radii.y,Zt.a.EPSILON15)),Object(Gn.a)(this.radii.z>0),li.from(t);var n=li.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(n)>=this.radii.z-e))return li.set(0,0,n).to(r)}}]),t}();function pi(t,e,r,n,i){return vi.apply(this,arguments)}function vi(){return(vi=l()(c.a.mark((function t(e,r,n,i,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=bi(e,r,n,i,a),t.next=3,Nn(e,e.gltfFormat,i,a);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bi(t,e,r,n,i){if(r=Lt(t,e,r),1!==t.version)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));r=Rt(t,e,r);var a=new DataView(e);if(t.gltfFormat=a.getUint32(r,!0),r=Pn(t,e,r=Mt(t,e,r+=4),n),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var o=new bt(t.featureTableJson,t.featureTableBinary),u=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=u,!Number.isFinite(u))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=o.getGlobalProperty("RTC_CENTER",ht.FLOAT,3);new Nt(t.batchTableJson,t.batchTableBinary,u);return function(t,e,r,n){for(var i=[new Array(n),t._batchTable][0],a=new yt.a,o=(new yt.a,new yt.a,new yt.a,new Cn.a),u=new Bn.a,s=new yt.a,c={},f=new Fn.a,l=[],h=[],y=new yt.a,d=new yt.a,p=0;p<n;p++){var v=void 0;if(e.hasProperty("POSITION"))v=e.getProperty("POSITION",ht.FLOAT,3,p,a);else if(e.hasProperty("POSITION_QUANTIZED")){v=e.getProperty("POSITION_QUANTIZED",ht.UNSIGNED_SHORT,3,p,a);var b=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",ht.FLOAT,3,y);if(!b)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var g=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",ht.FLOAT,3,d);if(!g)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var m=0;m<3;m++)v[m]=v[m]/65535*g[m]+b[m]}if(!v)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");a.copy(v),c.translation=a,t.normalUp=e.getProperty("NORMAL_UP",ht.FLOAT,3,p,l),t.normalRight=e.getProperty("NORMAL_RIGHT",ht.FLOAT,3,p,h);if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",ht.UNSIGNED_SHORT,2,l),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",ht.UNSIGNED_SHORT,2,h),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(di.WGS84.eastNorthUpToFixedFrame(a,f),f.getRotationMatrix3(o)):o.identity()}!1,u.fromMatrix3(o),c.rotation=u,s.set(1,1,1);var O=e.getProperty("SCALE",ht.FLOAT,1,p);Number.isFinite(O)&&s.multiplyByScalar(O);var w=e.getProperty("SCALE_NON_UNIFORM",ht.FLOAT,3,p,l);w&&s.scale(w),c.scale=s;var k=e.getProperty("BATCH_ID",ht.UNSIGNED_SHORT,1,p);void 0===k&&(k=p);var T=(new Fn.a).fromQuaternion(c.rotation);f.identity(),f.translate(c.translation),f.multiplyRight(T),f.scale(c.scale);var E=f.clone();i[p]={modelMatrix:E,batchId:k}}t.instances=i}(t,o,0,u),r}function gi(t,e,r,n,i,a){return mi.apply(this,arguments)}function mi(){return(mi=l()(c.a.mark((function t(e,r,n,i,a,o){var u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Lt(e,r,n),u=new DataView(r),e.tilesLength=u.getUint32(n,!0),n+=4,e.tiles=[];case 5:if(!(e.tiles.length<e.tilesLength&&e.byteLength-n>12)){t.next=13;break}return s={},e.tiles.push(s),t.next=10,o(r,n,i,a,s);case 10:n=t.sent,t.next=5;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oi(t){return wi.apply(this,arguments)}function wi(){return(wi=l()(c.a.mark((function t(e){var r,n,i,a,o=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:0,n=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,(a=o.length>4&&void 0!==o[4]?o[4]:{}).byteOffset=r,a.type=E(e,r),t.t0=a.type,t.next=t.t0===O.COMPOSITE?9:t.t0===O.BATCHED_3D_MODEL?12:t.t0===O.INSTANCED_3D_MODEL?15:t.t0===O.POINT_CLOUD?18:21;break;case 9:return t.next=11,gi(a,e,r,n,i,Oi);case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,Mn(a,e,r,n,i);case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,pi(a,e,r,n,i);case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,oe(a,e,r,n,i);case 20:return t.abrupt("return",t.sent);case 21:throw new Error("3DTileLoader: unknown type ".concat(a.type));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ki(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ti(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ti(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function Ti(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ei(t,e){if(t.content){var r=t.content.uri||t.content.url;t.contentUrl="".concat(e.basePath,"/").concat(r)}return t.id=t.contentUrl,t.lodMetricType=m,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=function(t){if(!t.contentUrl)return p;var e=t.contentUrl.split(".").pop();switch(e){case"pnts":return b;case"i3dm":case"b3dm":return v;default:return e}}(t),t.refine=function(t){switch(t){case"REPLACE":case"replace":return d;case"ADD":case"add":return y;default:return t}}(t.refine),t}function Ai(t){var e=t.basePath,r=Ei(t.root,t),n=[];for(n.push(r);n.length>0;){var i,a=ki(n.pop().children||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value;Ei(o,{basePath:e}),n.push(o)}}catch(t){a.e(t)}finally{a.f()}}return r}function ji(t){return n.dirname(t.url)}function xi(t,e,r){return Si.apply(this,arguments)}function Si(){return(Si=l()(c.a.mark((function t(e,r,n){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i={}).content=i.content||{},0,t.next=5,Oi(e,0,r,n,i.content);case 5:return t.abrupt("return",i.content);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _i(t,e,r){return Ii.apply(this,arguments)}function Ii(){return(Ii=l()(c.a.mark((function t(e,r,n){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=JSON.parse((new TextDecoder).decode(e))).loader=r.loader||Ni,i.url=n.url,i.basePath=ji(i),i.root=Ai(i),i.type=g,i.lodMetricType=m,i.lodMetricValue=i.root.lodMetricValue,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pi(){return(Pi=l()(c.a.mark((function t(e,r,n,i){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r["3d-tiles"]||{},!("auto"===a.isTileset?n.url&&-1!==n.url.indexOf(".json"):a.isTileset)){t.next=8;break}return t.next=5,_i(e,r,n);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,xi(e,r,n);case 10:e=t.sent;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ni={id:"3d-tiles",name:"3D Tiles",version:"2.3.9",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:function(t,e,r,n){return Pi.apply(this,arguments)},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",tile:null,tileset:null,assetGltfUpAxis:null}}},Li=Ni,Ri="",Mi={};function Di(t){for(var e in Mi)if(t.startsWith(e)){var r=Mi[e];t=t.replace(e,r)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(Ri).concat(t)),t}var Ui=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},Ci=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},Bi=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Fi=/^([-\w.]+\/[-\w.+]+)/;function Vi(t){if("string"!=typeof t)return"";var e=t.match(Bi);return e?e[1]:""}var Gi=/\?.*/;function zi(t){if(Ui(t)){var e=function(t){if("string"!=typeof t)return"";var e=t.match(Fi);return e?e[1]:t}(t.headers.get("content-type")),r=Vi(t.url);return{url:Hi(t.url||""),type:e||r||null}}return Ci(t)?{url:Hi(t.name||""),type:t.type||""}:"string"==typeof t?{url:Hi(t),type:Vi(t)}:{url:"",type:""}}function qi(t){return Ui(t)?t.headers["content-length"]||-1:Ci(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Hi(t){return t.replace(Gi,"")}function Wi(t){return Ki.apply(this,arguments)}function Ki(){return(Ki=l()(c.a.mark((function t(e){var r,n,i,a,o,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ui(e)){t.next=2;break}return t.abrupt("return",e);case 2:return r={},(n=qi(e))>=0&&(r["content-length"]=String(n)),i=zi(e),a=i.url,(o=i.type)&&(r["content-type"]=o),t.next=9,Qi(e);case 9:return(u=t.sent)&&(r["x-first-bytes"]=u),"string"==typeof e&&(e=(new TextEncoder).encode(e)),s=new Response(e,{headers:r}),Object.defineProperty(s,"url",{value:a}),t.abrupt("return",s);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qi(t){return Yi.apply(this,arguments)}function Yi(){return(Yi=l()(c.a.mark((function t(e){var r,n,i,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=5,"string"!=typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,r)));case 3:if(!(e instanceof Blob)){t.next=8;break}return n=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){return t(e.target&&e.target.result)},e.readAsDataURL(n)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return i=e.slice(0,r),a=Zi(i),t.abrupt("return","data:base64,".concat(a));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zi(t){for(var e="",r=new Uint8Array(t),n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}function Ji(t){return Xi.apply(this,arguments)}function Xi(){return(Xi=l()(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,!e.headers.get("Content-Type").includes("application/json")){t.next=10;break}return t.t0=r,t.next=7,e.text();case 7:r=t.t0+=t.sent,t.next=11;break;case 10:r+=e.statusText;case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(1),t.abrupt("return",r);case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function $i(t){return ta.apply(this,arguments)}function ta(){return(ta=l()(c.a.mark((function t(e){var r,n,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof e){t.next=5;break}return t.next=4,Wi(e);case 4:return t.abrupt("return",t.sent);case 5:return e=Di(e),t.next=8,fetch(e,r);case 8:if((n=t.sent).ok||!r.throws){t.next=15;break}return t.t0=Error,t.next=13,Ji(n);case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ea(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ra(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ea(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function na(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ia(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ia(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw a}}}}function ia(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var aa="https://api.cesium.com/v1/assets";function oa(t,e){return ua.apply(this,arguments)}function ua(){return(ua=l()(c.a.mark((function t(e,r){var n,i,a,o,u,s,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=6;break}return t.next=3,sa(e);case 3:n=t.sent,i=na(n.items);try{for(i.s();!(a=i.n()).done;)"3DTILES"===(o=a.value).type&&(r=o.id)}catch(t){i.e(t)}finally{i.f()}case 6:return t.next=8,fa(e,r);case 8:return u=t.sent,s=u.type,f=u.url,k("3DTILES"===s&&f),u.headers={Authorization:"Bearer ".concat(u.accessToken)},t.abrupt("return",u);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function sa(t){return ca.apply(this,arguments)}function ca(){return(ca=l()(c.a.mark((function t(e){var r,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(e),aa,r={Authorization:"Bearer ".concat(e)},t.next=5,$i("https://api.cesium.com/v1/assets",{headers:r,throws:!0});case 5:return n=t.sent,t.next=8,n.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fa(t,e){return la.apply(this,arguments)}function la(){return(la=l()(c.a.mark((function t(e,r){var n,i,a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(e,r),n={Authorization:"Bearer ".concat(e)},i="".concat(aa,"/").concat(r),t.next=5,$i("".concat(i),{headers:n,throws:!0});case 5:return a=t.sent,t.next=8,a.json();case 8:return o=t.sent,t.next=11,$i("".concat(i,"/endpoint"),{headers:n,throws:!0});case 11:return a=t.sent,t.next=14,a.json();case 14:return u=t.sent,o=ra(ra({},o),u),t.abrupt("return",o);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ha(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ya(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ha(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function da(){return(da=l()(c.a.mark((function t(e){var r,n,i,a,o=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(r=o.length>1&&void 0!==o[1]?o[1]:{})["cesium-ion"]||{},n=r.accessToken,i=r.assetId,Number.isFinite(i)||(a=e.match(/\/([0-9]+)\/tileset.json/),i=a&&a[1]),t.abrupt("return",oa(n,i));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var pa,va=ya(ya({},Li),{},{id:"cesium-ion",name:"Cesium Ion",preload:function(t){return da.apply(this,arguments)},parse:(pa=l()(c.a.mark((function t(e,r,n,i){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r["3d-tiles"]=r["cesium-ion"],r.loader=va,t.abrupt("return",Li.parse(e,r,n));case 3:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return pa.apply(this,arguments)}),options:{"cesium-ion":ya(ya({},Li.options["3d-tiles"]),{},{accessToken:null})}}),ba=va;function ga(t,e,r){if(!e)return r+12;var n=t.magic,i=t.version,a=void 0===i?1:i,o=t.byteLength,u=void 0===o?12:o;return k(Array.isArray(n)&&Number.isFinite(a)&&Number.isFinite(u)),e.setUint8(r+0,n[0]),e.setUint8(r+1,n[1]),e.setUint8(r+2,n[2]),e.setUint8(r+3,n[3]),e.setUint32(r+4,a,!0),e.setUint32(r+8,u,!0),r+=12}function ma(t,e,r){t&&t.setUint32(e+8,r,!0)}function Oa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wa(t,e,r,n,i){var a=r;r+=ga(t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oa(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({magic:w.COMPOSITE,tiles:[]},t),e,r),e&&e.setUint32(r,t.tiles.length,!0),r+=4;for(var o=0;o<t.tiles.length;++o)r+=i(t.tiles[o],e,r,n);return ma(e,a,r-a),r}function ka(t,e,r,n){if(t)for(var i=0;i<n;i++)t.setUint8(e+i,r.charCodeAt(i));return e+n}function Ta(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ea(t,e,r,n){var i=t.featuresLength,a={BATCH_LENGTH:void 0===i?1:i},o=JSON.stringify(a),u=o.length,s=r;return r=ga(t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({magic:w.BATCHED_MODEL},t),e,r),e&&(e.setUint32(12,u,!0),e.setUint32(16,0,!0),e.setUint32(20,0,!0),e.setUint32(24,0,!0)),r+=16,ma(e,s,(r+=ka(e,r,o,u))-s),r}function Aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ja(t,e,r,n){var i=t,a=i.featuresLength,o=void 0===a?1:a,u=i.gltfFormat,s=void 0===u?1:u,c=i.gltfUri,f=void 0===c?"":c,l=f.length,h={INSTANCES_LENGTH:o,POSITION:new Array(3*o).fill(0)},y=JSON.stringify(h),d=y.length,p=r;return r=ga(t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({magic:w.INSTANCED_MODEL},t),e,0),e&&(e.setUint32(12,d,!0),e.setUint32(16,0,!0),e.setUint32(20,0,!0),e.setUint32(24,0,!0),e.setUint32(28,s,!0)),r+=20,r+=ka(e,r,y,d),ma(e,p,(r+=ka(e,r,f,l))-p),r}function xa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Sa={POINTS_LENGTH:1,POSITIONS:{byteOffset:0}};function _a(t,e,r,n){var i=t.featureTableJson,a=void 0===i?Sa:i,o=JSON.stringify(a);o=function(t,e){for(var r=t.length,n=Math.ceil(r/e)*e-r,i="",a=0;a<n;++a)i+=" ";return t+i}(o,4);var u=t.featureTableJsonByteLength,s=void 0===u?o.length:u,c=new ArrayBuffer(12),f=c.byteLength,l=r;return r+=ga(t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xa(Object(r),!0).forEach((function(e){x()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({magic:w.POINT_CLOUD},t),e,0),e&&(e.setUint32(r+0,s,!0),e.setUint32(r+4,f,!0),e.setUint32(r+8,0,!0),e.setUint32(r+12,0,!0)),r+=16,r+=ka(e,r,o,s),r+=function(t,e,r,n){if(t)for(var i=0;i<n;i++)t.setUint8(e+i,r[i]),e++;return e+n}(e,r,c,f),ma(e,l,r-l),r}function Ia(t,e,r,n){switch(k("string"==typeof t.type),t.type){case O.COMPOSITE:return wa(t,e,r,n,Ia);case O.POINT_CLOUD:return _a(t,e,r);case O.BATCHED_3D_MODEL:return Ea(t,e,r);case O.INSTANCED_3D_MODEL:return ja(t,e,r);default:throw new Error("3D Tiles: unknown tile type")}}var Pa={name:"3D Tile",extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],encodeSync:function(t,e){return function(t,e){var r=Ia(t,null,0,e),n=new ArrayBuffer(r);return Ia(t,new DataView(n),0,e),n}(t,e)},binary:!0}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(34),c=r(10),f=r(4),l=r(5),h=r(20);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var d=[0,0,0],p={},v=function(t){Object(a.a)(r,t);var e=y(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n.a)(this,r),t=e.call(this,-0,-0,-0),1===arguments.length&&Object(c.e)(i)?t.copy(i):(c.b.debug&&(Object(f.a)(i),Object(f.a)(a),Object(f.a)(o)),t[0]=i,t[1]=a,t[2]=o),t}return Object(i.a)(r,null,[{key:"ZERO",get:function(){return p.ZERO=p.ZERO||Object.freeze(new r(0,0,0,0))}}]),Object(i.a)(r,[{key:"set",value:function(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return c.b.debug&&(Object(f.a)(t.x),Object(f.a)(t.y),Object(f.a)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"angle",value:function(t){return l.a(this,t)}},{key:"cross",value:function(t){return l.c(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?d:r;return l.i(this,this,n,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?d:r;return l.j(this,this,n,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,r=t.origin,n=void 0===r?d:r;return l.k(this,this,n,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return l.m(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(h.c)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return l.l(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Object(h.b)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return l.n(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(f.a)(t)}}]),r}(s.a)},function(t,e,r){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n=r(36),i=r(9),a=r(7),o=r(14),u=r(15),s=r(6),c=r(4),f=r(35),l=r(20),h=r(12),y=r(21),d=r(5),p=r(11);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var b=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),g=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),O={},w=function(t){Object(o.a)(r,t);var e=v(r);function r(t){var n;return Object(i.a)(this,r),n=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?n.copy(t):n.identity(),n}return Object(a.a)(r,[{key:"INDICES",get:function(){return m}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return O.IDENTITY=O.IDENTITY||Object.freeze(new r(b)),O.IDENTITY}},{key:"ZERO",get:function(){return O.ZERO=O.ZERO||Object.freeze(new r(g)),O.ZERO}}]),Object(a.a)(r,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,r,n,i,a,o,u,s,c,f,l,h,y,d,p){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=u,this[8]=s,this[9]=c,this[10]=f,this[11]=l,this[12]=h,this[13]=y,this[14]=d,this[15]=p,this.check()}},{key:"setRowMajor",value:function(t,e,r,n,i,a,o,u,s,c,f,l,h,y,d,p){return this[0]=t,this[1]=i,this[2]=s,this[3]=h,this[4]=e,this[5]=a,this[6]=c,this[7]=y,this[8]=r,this[9]=o,this[10]=f,this[11]=d,this[12]=n,this[13]=u,this[14]=l,this[15]=p,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(b)}},{key:"fromQuaternion",value:function(t){return h.b(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,i=t.bottom,a=t.top,o=t.near,u=t.far;return u===1/0?r._computeInfinitePerspectiveOffCenter(this,e,n,i,a,o):h.c(this,e,n,i,a,o,u),this.check()}},{key:"lookAt",value:function(t,e,r){if(1===arguments.length){var n=t;t=n.eye,e=n.center,r=n.up}return e=e||[0,0,0],r=r||[0,1,0],h.e(this,t,e,r),this.check()}},{key:"ortho",value:function(t){var e=t.left,r=t.right,n=t.bottom,i=t.top,a=t.near,o=void 0===a?.1:a,u=t.far,s=void 0===u?500:u;return h.g(this,e,r,n,i,o,s),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,n=void 0===e?45*Math.PI/180:e,i=t.aspect,a=void 0===i?1:i,o=t.focalDistance,u=void 0===o?1:o,s=t.near,c=void 0===s?.1:s,f=t.far,l=void 0===f?500:f;if(n>2*Math.PI)throw Error("radians");var h=n/2,y=u*Math.tan(h),d=y*a;return(new r).ortho({left:-d,right:d,bottom:-y,top:y,near:c,far:l})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,r=void 0===e?void 0:e,n=t.fov,i=void 0===n?45*Math.PI/180:n,a=t.aspect,o=void 0===a?1:a,u=t.near,s=void 0===u?.1:u,c=t.far,f=void 0===c?500:c;if((r=r||i)>2*Math.PI)throw Error("radians");return h.h(this,r,o,s,f),this.check()}},{key:"determinant",value:function(){return h.a(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*n,t[5]=this[5]*i,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*n,t[9]=this[9]*i,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=this[4]*n,t[4]=this[5]*i,t[5]=this[6]*a,t[6]=this[8]*n,t[7]=this[9]*i,t[8]=this[10]*a,t}},{key:"transpose",value:function(){return h.o(this,this),this.check()}},{key:"invert",value:function(){return h.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return h.f(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return h.f(this,this,t),this.check()}},{key:"rotateX",value:function(t){return h.j(this,this,t),this.check()}},{key:"rotateY",value:function(t){return h.k(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return h.l(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(n.a)(t,3),r=e[0],i=e[1],a=e[2];return this.rotateX(r).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(t,e){return h.i(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?h.m(this,this,t):h.m(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return h.n(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=p.n(e||[-0,-0,-0,-0],t,this),Object(c.b)(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=y.d(e||[-0,-0],t,this);break;case 3:e=d.m(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=Object(l.a)(e||[-0,-0],t,this);break;case 3:e=Object(l.c)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,r){return this.identity().translate([t,e,r])}},{key:"transformPoint",value:function(t,e){return Object(c.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return Object(c.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,r,n,i,a){var o=2*a/(r-e),u=2*a/(i-n),s=(r+e)/(r-e),c=(i+n)/(i-n),f=-2*a;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=s,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}}]),r}(f.a)},function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(35),c=r(4),f=r(20),l=r(18),h=r(21),y=r(5);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var p=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),b=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),g={},m=function(t){Object(a.a)(r,t);var e=d(r);function r(t){var i;return Object(n.a)(this,r),i=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?i.copy(t):i.identity(),i}return Object(i.a)(r,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return b}}],[{key:"IDENTITY",get:function(){return g.IDENTITY=g.IDENTITY||Object.freeze(new r(p)),g.IDENTITY}},{key:"ZERO",get:function(){return g.ZERO=g.ZERO||Object.freeze(new r(v)),g.ZERO}}]),Object(i.a)(r,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,r,n,i,a,o,u,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=u,this[8]=s,this.check()}},{key:"setRowMajor",value:function(t,e,r,n,i,a,o,u,s){return this[0]=t,this[1]=n,this[2]=o,this[3]=e,this[4]=i,this[5]=u,this[6]=r,this[7]=a,this[8]=s,this.check()}},{key:"determinant",value:function(){return l.b(this)}},{key:"identity",value:function(){return this.copy(p)}},{key:"fromQuaternion",value:function(t){return l.c(this,t),this.check()}},{key:"transpose",value:function(){return l.i(this,this),this.check()}},{key:"invert",value:function(){return l.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return l.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return l.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return l.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?l.g(this,this,t):l.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return l.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=h.c(e||[-0,-0],t,this);break;case 3:e=y.l(e||[-0,-0,-0],t,this);break;case 4:e=Object(f.d)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}]),r}(s.a)},function(t,e,r){"use strict";r.d(e,"a",(function(){return D}));var n=r(9),i=r(7),a=r(14),o=r(15),u=r(6),s=r(25),c=r(4),f=r(19),l=r(1),h=r(18),y=r(5),d=r(11);function p(){var t=new l.a(4);return l.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function v(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function b(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=n*f+o*u+i*c-a*s,t[1]=i*f+o*s+a*u-n*c,t[2]=a*f+o*c+n*s-i*u,t[3]=o*f-n*u-i*s-a*c,t}function g(t,e,r,n){var i,a,o,u,s,c=e[0],f=e[1],h=e[2],y=e[3],d=r[0],p=r[1],v=r[2],b=r[3];return(a=c*d+f*p+h*v+y*b)<0&&(a=-a,d=-d,p=-p,v=-v,b=-b),1-a>l.b?(i=Math.acos(a),o=Math.sin(i),u=Math.sin((1-n)*i)/o,s=Math.sin(n*i)/o):(u=1-n,s=n),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*h+s*v,t[3]=u*y+s*b,t}function m(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[a]=(e[3*a+i]+e[3*i+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r}return t}d.b,d.g,d.c,d.l;var O,w,k,T,E,A,j=d.a,x=d.k,S=d.d,_=d.i,I=d.h,P=d.m,N=d.j,L=(d.f,d.e,O=y.b(),w=y.e(1,0,0),k=y.e(0,1,0),function(t,e,r){var n=y.d(e,r);return n<-.999999?(y.c(O,w,e),y.f(O)<1e-6&&y.c(O,k,e),y.h(O,O),v(t,O,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(y.c(O,e,r),t[0]=O[0],t[1]=O[1],t[2]=O[2],t[3]=1+n,N(t,t))});T=p(),E=p(),A=h.a();function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var M=[0,0,0,1],D=function(t){Object(a.a)(r,t);var e=R(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(n.a)(this,r),t=e.call(this,-0,-0,-0,-0),Array.isArray(i)&&1===arguments.length?t.copy(i):t.set(i,a,o,u),t}return Object(i.a)(r,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,r,n){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this.check()}},{key:"fromMatrix3",value:function(t){return m(this,t),this.check()}},{key:"identity",value:function(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}},{key:"fromAxisRotation",value:function(t,e){return v(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"len",value:function(){return I(this)}},{key:"lengthSquared",value:function(){return P(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return S(this,t)}},{key:"rotationTo",value:function(t,e){return L(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return j(this,this,t),this.check()}},{key:"calculateW",value:function(){var t,e,r,n,i;return t=this,r=(e=this)[0],n=e[1],i=e[2],t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),this.check()}},{key:"conjugate",value:function(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}},{key:"invert",value:function(){var t,e,r,n,i,a,o,u;return t=this,r=(e=this)[0],n=e[1],i=e[2],a=e[3],u=(o=r*r+n*n+i*i+a*a)?1/o:0,t[0]=-r*u,t[1]=-n*u,t[2]=-i*u,t[3]=a*u,this.check()}},{key:"lerp",value:function(t,e,r){return _(this,t,e,r),this.check()}},{key:"multiplyRight",value:function(t,e){return Object(f.a)(!e),b(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return Object(f.a)(!e),b(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=a*s-i*u,t[3]=o*s-n*u}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);t[0]=n*s-a*u,t[1]=i*s+o*u,t[2]=a*s+n*u,t[3]=o*s-i*u}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);t[0]=n*s+i*u,t[1]=i*s-n*u,t[2]=a*s+o*u,t[3]=o*s-a*u}(this,this,t),this.check()}},{key:"scale",value:function(t){return x(this,this,t),this.check()}},{key:"slerp",value:function(t,e,r){switch(arguments.length){case 1:var n=arguments[0],i=n.start;t=void 0===i?M:i,e=n.target,r=n.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);e=a[0],r=a[1],t=this}return g(this,t,e,r),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return d.o(e,t,this),Object(c.b)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=Object(c.a)(t)}}]),r}(s.a)}])}));